<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>This is Unofficial EPICS BASE Doxygen Site: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="epics.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">This is Unofficial EPICS BASE Doxygen Site
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_modules_pva2pva_README.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>See main <a href="https://epics-base.github.io/pva2pva/">documentation</a> page.</p>
<p>This repository contains two distinct pieces of software.</p>
<h2>QSRV </h2>
<p>A PV Access (protocol) server to be included in an EPICS IOC.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;myioc_DBD += qsrv.dbd</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;myioc_LIBS += qsrv</div></div><!-- fragment --><p>For convenience an executable `softIocPVA' is also built which is equivalent to the 'softIoc' executable from EPICS Base with the addition of QSRV.</p>
<h2><a class="el" href="d1/d5d/namespacep2p.html">p2p</a> </h2>
<p>A PV Access gateway (aka proxy). The '<a class="el" href="d1/d5d/namespacep2p.html">p2p</a>' executable.</p>
<h2>Dependencies </h2>
<ul>
<li><a href="http://www.aps.anl.gov/epics/">epics-base</a> &gt;= 3.15.3</li>
<li>and</li>
<li><a href="http://epics-pvdata.sourceforge.net/">pvDataCPP</a></li>
<li><a href="http://epics-pvdata.sourceforge.net/">pvAccessCPP</a></li>
</ul>
<p>or bundled with</p>
<ul>
<li><a href="http://www.aps.anl.gov/epics/">epics-base</a> &gt;= 7.0.1</li>
</ul>
<h2>Building </h2>
<p>To build all dependencies from source:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git clone --recursive https://github.com/epics-base/epics-base.git</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make -C epics-base</div></div><!-- fragment --><h2>Running QSRV </h2>
<p>Any IOC which includes QSRV will automatically start a PV Access server which exposes all channels (aka. "recordname.FLD") in the same manner as the built-in Channel Access (protocol) server.</p>
<h2>QSRV Group Definitions </h2>
<p>The following .db file snippet defines a group PV "grp:name" to have two sub-structures "A" and "B". Each sub-structure encodes the value and meta data one PV. eg. "recname.VAL" is stored in "grp:name.A" and "other.VAL" is "grp:name.B".</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;record(longin, &quot;recname&quot;) {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    info(Q:group, {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        &quot;grp:name&quot;:{</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;            &quot;A&quot;:{</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                +channel:&quot;VAL&quot;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            }</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        }</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    })</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;}</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;record(longin, &quot;other&quot;) {</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    info(Q:group, {</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        &quot;grp:name&quot;:{</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;            &quot;B&quot;:{</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                +channel:&quot;VAL&quot;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            }</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        }</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    })</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;}</div></div><!-- fragment --><p>A full list of <code>info(Q:group</code> options.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;record(...) {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    info(Q:group, {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        &quot;&lt;group_name&gt;&quot;:{</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;            +id:&quot;some/NT:1.0&quot;,  # top level ID</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            +meta:&quot;FLD&quot;,        # map top level alarm/timeStamp</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            +atomic:true,       # whether monitors default to multi-locking atomicity</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            &quot;&lt;field.name&gt;&quot;:{</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;                +type:&quot;scalar&quot;, # controls how map VAL mapped onto &lt;field.name&gt;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                +channel:&quot;VAL&quot;,</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                +id:&quot;some/NT:1.0&quot;,</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                +trigger:&quot;*&quot;,   # &quot;*&quot; or comma seperated list of &lt;field.name&gt;s</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                +putorder:0,    # set for fields where put is allowed, processing done in increasing order</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;            }</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        }</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    })</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;}</div></div><!-- fragment --><h2>Running <a class="el" href="d1/d5d/namespacep2p.html">p2p</a> </h2>
<p>pva2pva gateway is intended for use on a computer with at least two ethernet interfaces. At present each pva2pva process can act as a uni-directional proxy, presenting a pvAccess server on one interface, and a client on other(s).</p>
<p>The file <a href="loopback.conf">loopback.conf</a> provides a starting point.</p>
<p>At present there are no safe guard against creating loops where a gateway client side connects to its own server side. To avoid this ensure that the address list does not contain the interface used for the server (either directly, or included in a broadcast domain). <em>EPICS_PVA_AUTO_ADDR_LIST</em> <b>must</b> remain set to <em>NO</em>.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd pva2pva</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;./bin/linux-x86_64/pva2pva loopback.conf</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
