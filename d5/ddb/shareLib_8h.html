<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>This is Unofficial EPICS BASE Doxygen Site: modules/libcom/src/misc/shareLib.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../epics.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">This is Unofficial EPICS BASE Doxygen Site
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/ddb/shareLib_8h.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">shareLib.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Mark external symbols and entry points for shared libraries.  
<a href="#details">More...</a></p>

<p><a href="../../d5/ddb/shareLib_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa9f1f8e6cf54ef406871bb6732e17906"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/shareLib_8h.html#aa9f1f8e6cf54ef406871bb6732e17906">epicsShareExtern</a>&#160;&#160;&#160;extern</td></tr>
<tr class="separator:aa9f1f8e6cf54ef406871bb6732e17906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45077a8ff4bb4bbbe21b9c337f046e59"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a></td></tr>
<tr class="separator:a45077a8ff4bb4bbbe21b9c337f046e59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab8d90775fc4cfac78cf3e6e6e75486a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/shareLib_8h.html#aab8d90775fc4cfac78cf3e6e6e75486a">epicsShareClass</a></td></tr>
<tr class="separator:aab8d90775fc4cfac78cf3e6e6e75486a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ccaed6722b7ca1b0357a5e28029e7bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/shareLib_8h.html#a0ccaed6722b7ca1b0357a5e28029e7bc">epicsShareDef</a></td></tr>
<tr class="separator:a0ccaed6722b7ca1b0357a5e28029e7bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac8420a65f226101eb29eb2535a0e031"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a></td></tr>
<tr class="separator:aac8420a65f226101eb29eb2535a0e031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe050ad41ce8823deb2010f9c75ae85"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/shareLib_8h.html#a4fe050ad41ce8823deb2010f9c75ae85">READONLY</a></td></tr>
<tr class="separator:a4fe050ad41ce8823deb2010f9c75ae85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a969c88688a34f9b6a42738a7a9c80eca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/shareLib_8h.html#a969c88688a34f9b6a42738a7a9c80eca">INLINE_defs_EPICS</a></td></tr>
<tr class="separator:a969c88688a34f9b6a42738a7a9c80eca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb6f9e0395b47b8d5e3eeae4fe0c116"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/shareLib_8h.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a>&#160;&#160;&#160;<a class="el" href="../../d5/dd9/reader_8c.html#aa261b98e7b0037f2a9f13cbb4b8539d7">static</a></td></tr>
<tr class="separator:a2eb6f9e0395b47b8d5e3eeae4fe0c116"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Mark external symbols and entry points for shared libraries. </p>
<p>This is the header file for the "decorated names" that appear in header files, e.g. </p><pre class="fragment">#define epicsExportSharedSymbols
epicsShareFunc int epicsShareAPI a_func(int arg);
</pre><p>These are needed to properly create DLLs on MS Windows.</p>
<h3>USAGE</h3>
<p>There are two distinct classes of keywords in this file:</p>
<ol type="1">
<li><p class="startli">epicsShareAPI - specifies a multi-language calling mechanism. On windows this is the pascal calling convention which is used by visual basic and other high level tools. This is only necessary if a C/C++ function needs to be called from other languages or from high level tools. The epicsShareAPI keyword must be present between the function's returned data type and the function's name. All compilers targeting windows accept the __stdcall keyword in this location. Functions with variable argument lists should not use the epicsShareAPI keyword because __stdcall (pascal) calling convention cannot support variable length ed argument lists. </p><pre class="fragment">int epicsShareAPI myExtFunc ( int arg );
int epicsShareAPI myExtFunc ( int arg ) {}
</pre><dl class="section note"><dt>Note</dt><dd>The epicsShareAPI attribute is deprecated and has been removed from all IOC-specific APIs. Most libCom APIs still use it, but it may get removed from these at some point in the future.</dd></dl>
</li>
<li>epicsShare{Func,Class,Extern,Def} - specifies shareable library (DLL) export/import related information in the source code. On windows these keywords allow faster dispatching of calls to DLLs because more is known at compile time. It is also not necessary to maintain a linker input files specifying the DLL entry points. This maintenance can be more laborious with C++ decorated symbol names. These keywords are only necessary if the address of a function or data internal to a shareable library (DLL) needs to be visible outside of this shareable library (DLL). All compilers targeting windows accept the __declspec(dllexport) and __declspec(dllimport) keywords. For GCC version 4 and above the first three keywords specify a visibility attribute of "default", which marks the symbol as exported even when gcc is given the option -fvisibility=hidden. Doing this can significantly reduce the number of symbols exported to a shared library. See the URL below for more information.</li>
</ol>
<p>In header files declare references to externally visible variables, classes and functions like this: </p><pre class="fragment">#include "shareLib.h"
epicsShareFunc int myExtFunc ( int arg );
epicsShareExtern int myExtVar;
class epicsShareClass myClass { int func ( void ); };
</pre><p>In the implementation file, however, you write: </p><pre class="fragment">#include &lt;interfaces_imported_from_other_shareable_libraries.h&gt;
#define epicsExportSharedSymbols
#include &lt;interfaces_implemented_in_this_shareable_library.h&gt;

epicsShareDef int myExtVar = 4;
int myExtFunc ( int arg ) {}
int myClass::func ( void ) {}
</pre><p>By default <a class="el" href="../../d5/ddb/shareLib_8h.html" title="Mark external symbols and entry points for shared libraries. ">shareLib.h</a> sets the DLL import / export keywords to import from a DLL so that, for DLL consumers (users), nothing special must be done. However, DLL implementors must set epicsExportSharedSymbols as above to specify which functions are exported from the DLL and which of them are imported from other DLLs.</p>
<p>You must first <code>#include</code> what you import and then <code>#define</code> <code>epicsExportSharedSymbols</code> only right before you <code>#include</code> the prototypes for what you implement! You must include <a class="el" href="../../d5/ddb/shareLib_8h.html" title="Mark external symbols and entry points for shared libraries. ">shareLib.h</a> again each time that the state of the import/export keywords changes, but this usually occurs as a side effect of including the shareable libraries header file(s).</p>
<h3>Deprecated Usage</h3>
<p>The construct described below is used in some EPICS header files bit is no longer recommended as it makes it difficult to diagnose the incorrect inclusion of headers that are the wrong side of an <code>epicsExportSharedSymbols</code> marker.</p>
<p>Sometimes a header file for a shareable library exported interface will have some preprocessor switches like this if this header file must also include header files describing interfaces to other shareable libraries. </p><pre class="fragment">#ifdef epicsExportSharedSymbols
#   define interfacePDQ_epicsExportSharedSymbols
#   undef epicsExportSharedSymbols
#endif

#include "epicsTypes.h"
#include "epicsTime.h"

#ifdef interfacePDQ_epicsExportSharedSymbols
#   define epicsExportSharedSymbols
#   include "shareLib.h"
#endif

epicsShareFunc int myExtFunc ( int arg );
epicsShareExtern int myExtVar;
class epicsShareClass myClass {};
</pre><p>Fortunately, the above is only the concern of library authors and will have no impact on persons using functions and or external data from a library. </p>

<p>Definition in file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a45077a8ff4bb4bbbe21b9c337f046e59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define epicsShareAPI</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/ddb/shareLib_8h_source.html#l00205">205</a> of file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>

</div>
</div>
<a class="anchor" id="aab8d90775fc4cfac78cf3e6e6e75486a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define epicsShareClass</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/ddb/shareLib_8h_source.html#l00206">206</a> of file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0ccaed6722b7ca1b0357a5e28029e7bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define epicsShareDef</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/ddb/shareLib_8h_source.html#l00207">207</a> of file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa9f1f8e6cf54ef406871bb6732e17906"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define epicsShareExtern&#160;&#160;&#160;extern</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/ddb/shareLib_8h_source.html#l00204">204</a> of file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>

</div>
</div>
<a class="anchor" id="aac8420a65f226101eb29eb2535a0e031"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define epicsShareFunc</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/ddb/shareLib_8h_source.html#l00209">209</a> of file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2eb6f9e0395b47b8d5e3eeae4fe0c116"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INLINE&#160;&#160;&#160;<a class="el" href="../../d5/dd9/reader_8c.html#aa261b98e7b0037f2a9f13cbb4b8539d7">static</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/ddb/shareLib_8h_source.html#l00229">229</a> of file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>

</div>
</div>
<a class="anchor" id="a969c88688a34f9b6a42738a7a9c80eca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INLINE_defs_EPICS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/ddb/shareLib_8h_source.html#l00219">219</a> of file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4fe050ad41ce8823deb2010f9c75ae85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READONLY</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/ddb/shareLib_8h_source.html#l00213">213</a> of file <a class="el" href="../../d5/ddb/shareLib_8h_source.html">shareLib.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_e05d7e2b1ecd646af5bb94391405f3b5.html">modules</a></li><li class="navelem"><a class="el" href="../../dir_66ad26243ee5b9e4435a8c38b71879e0.html">libcom</a></li><li class="navelem"><a class="el" href="../../dir_3c26cc65c6aeedab9756b68f4c64367b.html">src</a></li><li class="navelem"><a class="el" href="../../dir_23e1665869483e32adba064e993f2db5.html">misc</a></li><li class="navelem"><a class="el" href="../../d5/ddb/shareLib_8h.html">shareLib.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
