<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>This is Unofficial EPICS BASE Doxygen Site: modules/libcom/src/osi/epicsMessageQueue.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../epics.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">This is Unofficial EPICS BASE Doxygen Site
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d86/epicsMessageQueue_8h.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">epicsMessageQueue.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A C++ and a C facility for communication between threads.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d2/d59/epicsAssert_8h_source.html">epicsAssert.h</a>&quot;</code><br />
<code>#include &quot;libComAPI.h&quot;</code><br />
<code>#include &quot;osdMessageQueue.h&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for epicsMessageQueue.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d1/dc5/epicsMessageQueue_8h__incl.png" border="0" usemap="#modules_2libcom_2src_2osi_2epicsMessageQueue_8h" alt=""/></div>
<map name="modules_2libcom_2src_2osi_2epicsMessageQueue_8h" id="modules_2libcom_2src_2osi_2epicsMessageQueue_8h">
<area shape="rect" id="node2" href="../../d2/d59/epicsAssert_8h.html" title="An EPICS&#45;specific replacement for ANSI C&#39;s assert. " alt="" coords="93,95,201,121"/>
<area shape="rect" id="node4" href="../../d5/d48/compilerDependencies_8h.html" title="Compiler specific declarations. " alt="" coords="129,169,309,196"/>
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d97/epicsMessageQueue_8h__dep__incl.png" border="0" usemap="#modules_2libcom_2src_2osi_2epicsMessageQueue_8hdep" alt=""/></div>
<map name="modules_2libcom_2src_2osi_2epicsMessageQueue_8hdep" id="modules_2libcom_2src_2osi_2epicsMessageQueue_8hdep">
<area shape="rect" id="node2" href="../../db/d24/epicsGeneralTime_8c.html" title="modules/libcom/src\l/osi/epicsGeneralTime.c" alt="" coords="5,102,179,143"/>
<area shape="rect" id="node3" href="../../d3/dd8/epicsMessageQueue_8cpp.html" title="modules/libcom/src\l/osi/epicsMessageQueue.cpp" alt="" coords="203,102,410,143"/>
<area shape="rect" id="node4" href="../../d7/d9e/default_2osdMessageQueue_8cpp.html" title="modules/libcom/src\l/osi/os/default/osdMessage\lQueue.cpp" alt="" coords="435,95,629,151"/>
<area shape="rect" id="node5" href="../../d9/d89/osdMessageQueue_8c.html" title="modules/libcom/src\l/osi/os/RTEMS/osdMessageQueue.c" alt="" coords="654,102,901,143"/>
<area shape="rect" id="node6" href="../../d9/de0/vxWorks_2osdMessageQueue_8cpp.html" title="modules/libcom/src\l/osi/os/vxWorks/osdMessage\lQueue.cpp" alt="" coords="925,95,1128,151"/>
</map>
</div>
</div>
<p><a href="../../d5/d86/epicsMessageQueue_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7807f0edc88b2342b85787fd3c88404b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../df/daa/structepicsMessageQueueOSD.html">epicsMessageQueueOSD</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a></td></tr>
<tr class="separator:a7807f0edc88b2342b85787fd3c88404b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8a11f3eb7bbd5854ca452c51786364f0"><td class="memItemLeft" align="right" valign="top">LIBCOM_API <a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a8a11f3eb7bbd5854ca452c51786364f0">epicsMessageQueueCreate</a> (unsigned int capacity, unsigned int maximumMessageSize)</td></tr>
<tr class="memdesc:a8a11f3eb7bbd5854ca452c51786364f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a message queue.  <a href="#a8a11f3eb7bbd5854ca452c51786364f0">More...</a><br /></td></tr>
<tr class="separator:a8a11f3eb7bbd5854ca452c51786364f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5832a837db758b205ceb0b1f3349496a"><td class="memItemLeft" align="right" valign="top">LIBCOM_API void epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a5832a837db758b205ceb0b1f3349496a">epicsMessageQueueDestroy</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id)</td></tr>
<tr class="memdesc:a5832a837db758b205ceb0b1f3349496a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a message queue, release all its memory.  <a href="#a5832a837db758b205ceb0b1f3349496a">More...</a><br /></td></tr>
<tr class="separator:a5832a837db758b205ceb0b1f3349496a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cfa83c566b79d82a2aa246c139d9d7c"><td class="memItemLeft" align="right" valign="top">LIBCOM_API int epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7cfa83c566b79d82a2aa246c139d9d7c">epicsMessageQueueTrySend</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id, void *message, unsigned int messageSize)</td></tr>
<tr class="memdesc:a7cfa83c566b79d82a2aa246c139d9d7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to send a message.  <a href="#a7cfa83c566b79d82a2aa246c139d9d7c">More...</a><br /></td></tr>
<tr class="separator:a7cfa83c566b79d82a2aa246c139d9d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeda4cc5f59ea3dd864f0afbf894d7be9"><td class="memItemLeft" align="right" valign="top">LIBCOM_API int epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#aeda4cc5f59ea3dd864f0afbf894d7be9">epicsMessageQueueSend</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id, void *message, unsigned int messageSize)</td></tr>
<tr class="memdesc:aeda4cc5f59ea3dd864f0afbf894d7be9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message.  <a href="#aeda4cc5f59ea3dd864f0afbf894d7be9">More...</a><br /></td></tr>
<tr class="separator:aeda4cc5f59ea3dd864f0afbf894d7be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef20cdddcd7def02ae6fb4fb88202d9f"><td class="memItemLeft" align="right" valign="top">LIBCOM_API int epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#aef20cdddcd7def02ae6fb4fb88202d9f">epicsMessageQueueSendWithTimeout</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id, void *message, unsigned int messageSize, double <a class="el" href="../../d9/ddb/pvutils_8h.html#a87ffc14d6746aff1937d2819f359bc8f">timeout</a>)</td></tr>
<tr class="memdesc:aef20cdddcd7def02ae6fb4fb88202d9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message or timeout.  <a href="#aef20cdddcd7def02ae6fb4fb88202d9f">More...</a><br /></td></tr>
<tr class="separator:aef20cdddcd7def02ae6fb4fb88202d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1720b80096b04c40f67ac56e8d74ae6b"><td class="memItemLeft" align="right" valign="top">LIBCOM_API int epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a1720b80096b04c40f67ac56e8d74ae6b">epicsMessageQueueTryReceive</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id, void *message, unsigned int size)</td></tr>
<tr class="memdesc:a1720b80096b04c40f67ac56e8d74ae6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to receive a message.  <a href="#a1720b80096b04c40f67ac56e8d74ae6b">More...</a><br /></td></tr>
<tr class="separator:a1720b80096b04c40f67ac56e8d74ae6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a595dbe6a79f1da096344739f1dd679b8"><td class="memItemLeft" align="right" valign="top">LIBCOM_API int epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a595dbe6a79f1da096344739f1dd679b8">epicsMessageQueueReceive</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id, void *message, unsigned int size)</td></tr>
<tr class="memdesc:a595dbe6a79f1da096344739f1dd679b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the next message on the queue.  <a href="#a595dbe6a79f1da096344739f1dd679b8">More...</a><br /></td></tr>
<tr class="separator:a595dbe6a79f1da096344739f1dd679b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf890936b98f81773fdfe9af51a7c5c"><td class="memItemLeft" align="right" valign="top">LIBCOM_API int epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a3bf890936b98f81773fdfe9af51a7c5c">epicsMessageQueueReceiveWithTimeout</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id, void *message, unsigned int size, double <a class="el" href="../../d9/ddb/pvutils_8h.html#a87ffc14d6746aff1937d2819f359bc8f">timeout</a>)</td></tr>
<tr class="memdesc:a3bf890936b98f81773fdfe9af51a7c5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a message to be queued.  <a href="#a3bf890936b98f81773fdfe9af51a7c5c">More...</a><br /></td></tr>
<tr class="separator:a3bf890936b98f81773fdfe9af51a7c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a007d9230869cef8a4889b78ac16e61f6"><td class="memItemLeft" align="right" valign="top">LIBCOM_API int epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a007d9230869cef8a4889b78ac16e61f6">epicsMessageQueuePending</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id)</td></tr>
<tr class="memdesc:a007d9230869cef8a4889b78ac16e61f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many messages are queued.  <a href="#a007d9230869cef8a4889b78ac16e61f6">More...</a><br /></td></tr>
<tr class="separator:a007d9230869cef8a4889b78ac16e61f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699a26197c5b154e461eb559abeb8999"><td class="memItemLeft" align="right" valign="top">LIBCOM_API void epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a699a26197c5b154e461eb559abeb8999">epicsMessageQueueShow</a> (<a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> id, int level)</td></tr>
<tr class="memdesc:a699a26197c5b154e461eb559abeb8999"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays some information about the message queue.  <a href="#a699a26197c5b154e461eb559abeb8999">More...</a><br /></td></tr>
<tr class="separator:a699a26197c5b154e461eb559abeb8999"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A C++ and a C facility for communication between threads. </p>
<dl class="section author"><dt>Author</dt><dd>W. Eric Norum</dd></dl>
<p>Each C function corresponds to one of the C++ methods. </p>

<p>Definition in file <a class="el" href="../../d5/d86/epicsMessageQueue_8h_source.html">epicsMessageQueue.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a7807f0edc88b2342b85787fd3c88404b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../df/daa/structepicsMessageQueueOSD.html">epicsMessageQueueOSD</a>* <a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d86/epicsMessageQueue_8h_source.html#l00026">26</a> of file <a class="el" href="../../d5/d86/epicsMessageQueue_8h_source.html">epicsMessageQueue.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8a11f3eb7bbd5854ca452c51786364f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API <a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a> epicsStdCall epicsMessageQueueCreate </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>maximumMessageSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a message queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">capacity</td><td>Maximum number of messages to queue </td></tr>
    <tr><td class="paramname">maximumMessageSize</td><td>Number of bytes of the largest message that may be queued </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An identifier for the new queue, or 0. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00069">69</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="../../df/daa/structepicsMessageQueueOSD.html">epicsMessageQueueId</a> pmsg;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slotBytes, slotLongs;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span>(capacity == 0)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    pmsg = (<a class="code" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>)calloc(1, <span class="keyword">sizeof</span>(*pmsg));</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span>(!pmsg)</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a98ef536bb9acc82ca1aa785d4464848d">capacity</a> = capacity;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#afa9c4f18bc4dce36dcce2e3d0ac84b05">maxMessageSize</a> = maxMessageSize;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    slotLongs = 1 + ((maxMessageSize + <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> long) - 1) / <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> long));</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    slotBytes = slotLongs * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> long);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a955da1df675dee80c6ed2d53fb6081dc">mutex</a> = <a class="code" href="../../d9/da2/epicsMutex_8h.html#ac78d483cd4dc31ea4f643e4e79ff0033">epicsMutexCreate</a>();</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a13740ed4919168843cf9c63b007978eb">buf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>*)calloc(pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a98ef536bb9acc82ca1aa785d4464848d">capacity</a>, slotBytes);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span>(!pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a13740ed4919168843cf9c63b007978eb">buf</a> || !pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a955da1df675dee80c6ed2d53fb6081dc">mutex</a>) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">if</span>(pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a955da1df675dee80c6ed2d53fb6081dc">mutex</a>)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <a class="code" href="../../db/d73/epicsMutex_8cpp.html#ae5701886815168730c68a9e7a03736e9">epicsMutexDestroy</a>(pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a955da1df675dee80c6ed2d53fb6081dc">mutex</a>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        free(pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a13740ed4919168843cf9c63b007978eb">buf</a>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        free(pmsg);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#aac78efa5da50bbbe53e969429a01afff">inPtr</a> = pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#afb93468b1b02991706153517e40d52ee">outPtr</a> = pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a28fbd886eb3b35be5ce050864a339b8d">firstMessageSlot</a> = (<span class="keywordtype">char</span> *)&amp;pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a13740ed4919168843cf9c63b007978eb">buf</a>[0];</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#adc92cc7d3fec103c6ccd771432fd590f">lastMessageSlot</a> = (<span class="keywordtype">char</span> *)&amp;pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a13740ed4919168843cf9c63b007978eb">buf</a>[(capacity - 1) * slotLongs];</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a576d1d257f9242ec444072efd326bf52">full</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#a8dbce25795edc111c4982639c1937481">slotSize</a> = slotBytes;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="../../d2/d71/ellLib_8h.html#a8e156d5d6f82dd9c8d18ad3ed0206f70">ellInit</a>(&amp;pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#ac34de192004b61d5519a636e73706d76">sendQueue</a>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="../../d2/d71/ellLib_8h.html#a8e156d5d6f82dd9c8d18ad3ed0206f70">ellInit</a>(&amp;pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#aa336dda70f9ef046861799e379e6aa0e">receiveQueue</a>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="../../d2/d71/ellLib_8h.html#a8e156d5d6f82dd9c8d18ad3ed0206f70">ellInit</a>(&amp;pmsg-&gt;<a class="code" href="../../df/daa/structepicsMessageQueueOSD.html#aa35cd41edd15feff5e1a0cc524b4fae3">eventFreeList</a>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">return</span> pmsg;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="ttc" id="structepicsMessageQueueOSD_html_aac78efa5da50bbbe53e969429a01afff"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#aac78efa5da50bbbe53e969429a01afff">epicsMessageQueueOSD::inPtr</a></div><div class="ttdeci">volatile char * inPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00062">osdMessageQueue.cpp:62</a></div></div>
<div class="ttc" id="epicsMutex_8cpp_html_ae5701886815168730c68a9e7a03736e9"><div class="ttname"><a href="../../db/d73/epicsMutex_8cpp.html#ae5701886815168730c68a9e7a03736e9">epicsMutexDestroy</a></div><div class="ttdeci">void epicsStdCall epicsMutexDestroy(epicsMutexId pmutexNode)</div><div class="ttdoc">Destroy an epicsMutex semaphore. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/epicsMutex_8cpp_source.html#l00127">epicsMutex.cpp:127</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_afb93468b1b02991706153517e40d52ee"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#afb93468b1b02991706153517e40d52ee">epicsMessageQueueOSD::outPtr</a></div><div class="ttdeci">volatile char * outPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00063">osdMessageQueue.cpp:63</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_adc92cc7d3fec103c6ccd771432fd590f"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#adc92cc7d3fec103c6ccd771432fd590f">epicsMessageQueueOSD::lastMessageSlot</a></div><div class="ttdeci">char * lastMessageSlot</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00061">osdMessageQueue.cpp:61</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_a98ef536bb9acc82ca1aa785d4464848d"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#a98ef536bb9acc82ca1aa785d4464848d">epicsMessageQueueOSD::capacity</a></div><div class="ttdeci">unsigned long capacity</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00056">osdMessageQueue.cpp:56</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_a955da1df675dee80c6ed2d53fb6081dc"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#a955da1df675dee80c6ed2d53fb6081dc">epicsMessageQueueOSD::mutex</a></div><div class="ttdeci">epicsMutexId mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00055">osdMessageQueue.cpp:55</a></div></div>
<div class="ttc" id="epicsMessageQueue_8h_html_a7807f0edc88b2342b85787fd3c88404b"><div class="ttname"><a href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a></div><div class="ttdeci">struct epicsMessageQueueOSD * epicsMessageQueueId</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d86/epicsMessageQueue_8h_source.html#l00026">epicsMessageQueue.h:26</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_a28fbd886eb3b35be5ce050864a339b8d"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#a28fbd886eb3b35be5ce050864a339b8d">epicsMessageQueueOSD::firstMessageSlot</a></div><div class="ttdeci">char * firstMessageSlot</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00060">osdMessageQueue.cpp:60</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_aa336dda70f9ef046861799e379e6aa0e"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#aa336dda70f9ef046861799e379e6aa0e">epicsMessageQueueOSD::receiveQueue</a></div><div class="ttdeci">ELLLIST receiveQueue</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00051">osdMessageQueue.cpp:51</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_a8dbce25795edc111c4982639c1937481"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#a8dbce25795edc111c4982639c1937481">epicsMessageQueueOSD::slotSize</a></div><div class="ttdeci">unsigned long slotSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00064">osdMessageQueue.cpp:64</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_aa35cd41edd15feff5e1a0cc524b4fae3"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#aa35cd41edd15feff5e1a0cc524b4fae3">epicsMessageQueueOSD::eventFreeList</a></div><div class="ttdeci">ELLLIST eventFreeList</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00052">osdMessageQueue.cpp:52</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html">epicsMessageQueueOSD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00049">osdMessageQueue.cpp:49</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_afa9c4f18bc4dce36dcce2e3d0ac84b05"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#afa9c4f18bc4dce36dcce2e3d0ac84b05">epicsMessageQueueOSD::maxMessageSize</a></div><div class="ttdeci">unsigned long maxMessageSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00057">osdMessageQueue.cpp:57</a></div></div>
<div class="ttc" id="ellLib_8h_html_a8e156d5d6f82dd9c8d18ad3ed0206f70"><div class="ttname"><a href="../../d2/d71/ellLib_8h.html#a8e156d5d6f82dd9c8d18ad3ed0206f70">ellInit</a></div><div class="ttdeci">#define ellInit(PLIST)</div><div class="ttdoc">Initialize a list type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d71/ellLib_8h_source.html#l00076">ellLib.h:76</a></div></div>
<div class="ttc" id="epicsMutex_8h_html_ac78d483cd4dc31ea4f643e4e79ff0033"><div class="ttname"><a href="../../d9/da2/epicsMutex_8h.html#ac78d483cd4dc31ea4f643e4e79ff0033">epicsMutexCreate</a></div><div class="ttdeci">#define epicsMutexCreate()</div><div class="ttdoc">Create an epicsMutex semaphore for use from C code. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da2/epicsMutex_8h_source.html#l00168">epicsMutex.h:168</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_ac34de192004b61d5519a636e73706d76"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#ac34de192004b61d5519a636e73706d76">epicsMessageQueueOSD::sendQueue</a></div><div class="ttdeci">ELLLIST sendQueue</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00050">osdMessageQueue.cpp:50</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_a576d1d257f9242ec444072efd326bf52"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#a576d1d257f9242ec444072efd326bf52">epicsMessageQueueOSD::full</a></div><div class="ttdeci">bool full</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00066">osdMessageQueue.cpp:66</a></div></div>
<div class="ttc" id="structepicsMessageQueueOSD_html_a13740ed4919168843cf9c63b007978eb"><div class="ttname"><a href="../../df/daa/structepicsMessageQueueOSD.html#a13740ed4919168843cf9c63b007978eb">epicsMessageQueueOSD::buf</a></div><div class="ttdeci">unsigned long * buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00059">osdMessageQueue.cpp:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5832a837db758b205ceb0b1f3349496a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API void epicsStdCall epicsMessageQueueDestroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a message queue, release all its memory. </p>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00117">117</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d0e/structeventNode.html">eventNode</a> *evp;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">while</span> ((evp = reinterpret_cast &lt; struct eventNode * &gt;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            ( <a class="code" href="../../d9/de1/ellLib_8c.html#a10a6d8eeaa2a421214181eef55ecd52b">ellGet</a>(&amp;pmsg-&gt;eventFreeList) ) ) != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        destroyEventNode(evp);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="../../db/d73/epicsMutex_8cpp.html#ae5701886815168730c68a9e7a03736e9">epicsMutexDestroy</a>(pmsg-&gt;mutex);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    free(pmsg-&gt;buf);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    free(pmsg);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="epicsMutex_8cpp_html_ae5701886815168730c68a9e7a03736e9"><div class="ttname"><a href="../../db/d73/epicsMutex_8cpp.html#ae5701886815168730c68a9e7a03736e9">epicsMutexDestroy</a></div><div class="ttdeci">void epicsStdCall epicsMutexDestroy(epicsMutexId pmutexNode)</div><div class="ttdoc">Destroy an epicsMutex semaphore. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/epicsMutex_8cpp_source.html#l00127">epicsMutex.cpp:127</a></div></div>
<div class="ttc" id="ellLib_8c_html_a10a6d8eeaa2a421214181eef55ecd52b"><div class="ttname"><a href="../../d9/de1/ellLib_8c.html#a10a6d8eeaa2a421214181eef55ecd52b">ellGet</a></div><div class="ttdeci">ELLNODE * ellGet(ELLLIST *pList)</div><div class="ttdoc">Deletes and returns the first node from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de1/ellLib_8c_source.html#l00147">ellLib.c:147</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structeventNode_html"><div class="ttname"><a href="../../d8/d0e/structeventNode.html">eventNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00030">osdMessageQueue.cpp:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a007d9230869cef8a4889b78ac16e61f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API int epicsStdCall epicsMessageQueuePending </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>How many messages are queued. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Message queue identifier. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of messages presently in the queue. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00398">398</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordtype">char</span> *myInPtr, *myOutPtr;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordtype">int</span> nmsg;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="../../d9/da2/epicsMutex_8h.html#ae8ab644c8dbe85574562523eee214f13">epicsMutexMustLock</a>(pmsg-&gt;mutex);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    myInPtr = (<span class="keywordtype">char</span> *)pmsg-&gt;inPtr;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    myOutPtr = (<span class="keywordtype">char</span> *)pmsg-&gt;outPtr;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (pmsg-&gt;full)</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        nmsg = pmsg-&gt;capacity;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (myInPtr &gt;= myOutPtr)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        nmsg = (myInPtr - myOutPtr) / pmsg-&gt;slotSize;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        nmsg = pmsg-&gt;capacity  - (myOutPtr - myInPtr) / pmsg-&gt;slotSize;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="../../db/d73/epicsMutex_8cpp.html#ab238070b221d03bc1318f9c98b2e5a17">epicsMutexUnlock</a>(pmsg-&gt;mutex);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> nmsg;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div><div class="ttc" id="epicsMutex_8cpp_html_ab238070b221d03bc1318f9c98b2e5a17"><div class="ttname"><a href="../../db/d73/epicsMutex_8cpp.html#ab238070b221d03bc1318f9c98b2e5a17">epicsMutexUnlock</a></div><div class="ttdeci">void epicsStdCall epicsMutexUnlock(epicsMutexId pmutexNode)</div><div class="ttdoc">Release the semaphore. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/epicsMutex_8cpp_source.html#l00140">epicsMutex.cpp:140</a></div></div>
<div class="ttc" id="epicsMutex_8h_html_ae8ab644c8dbe85574562523eee214f13"><div class="ttname"><a href="../../d9/da2/epicsMutex_8h.html#ae8ab644c8dbe85574562523eee214f13">epicsMutexMustLock</a></div><div class="ttdeci">#define epicsMutexMustLock(ID)</div><div class="ttdoc">Claim a semaphore (see epicsMutexLock()). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da2/epicsMutex_8h_source.html#l00214">epicsMutex.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a595dbe6a79f1da096344739f1dd679b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API int epicsStdCall epicsMessageQueueReceive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetch the next message on the queue. </p>
<p>Wait for a message to be sent if the queue is empty, then move the first message queued to the specified location.</p>
<p>If the received message is larger than the specified message size the implementation may either return -1, or truncate the message. It is most efficient if the messageBufferSize is equal to the maximumMessageSize with which the message queue was created. </p><dl class="section return"><dt>Returns</dt><dd>Number of bytes in the message. </dd>
<dd>
-1 if the buffer is too small for the message. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00384">384</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;{</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> myReceive(pmsg, message, size, -1);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3bf890936b98f81773fdfe9af51a7c5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API int epicsStdCall epicsMessageQueueReceiveWithTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for a message to be queued. </p>
<p>Wait up to <code>timeout</code> seconds for a message to be sent if the queue is empty, then move the first message to the specified location.</p>
<p>If the received message is larger than the specified message buffer size the implementation may either return -1, or truncate the message. It is most efficient if the messageBufferSize is equal to the maximumMessageSize with which the message queue was created. </p><dl class="section return"><dt>Returns</dt><dd>Number of bytes in the message. </dd>
<dd>
-1 if a message is not received within the timeout interval. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00391">391</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> myReceive(pmsg, message, size, <a class="code" href="../../d0/d16/pvutils_8cpp.html#a87ffc14d6746aff1937d2819f359bc8f">timeout</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div><div class="ttc" id="pvutils_8cpp_html_a87ffc14d6746aff1937d2819f359bc8f"><div class="ttname"><a href="../../d0/d16/pvutils_8cpp.html#a87ffc14d6746aff1937d2819f359bc8f">timeout</a></div><div class="ttdeci">double timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d16/pvutils_8cpp_source.html#l00025">pvutils.cpp:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeda4cc5f59ea3dd864f0afbf894d7be9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API int epicsStdCall epicsMessageQueueSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>messageSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if the message was sent to a receiver or queued for future delivery. </dd>
<dd>
-1 if the message is larger than the queue's maximum message size. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00263">263</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">return</span> mySend(pmsg, message, size, -1);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aef20cdddcd7def02ae6fb4fb88202d9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API int epicsStdCall epicsMessageQueueSendWithTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>messageSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message or timeout. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if the message was sent to a receiver or queued for future delivery. </dd>
<dd>
-1 if the timeout was reached before the message could be sent or queued, or if the message is larger than the queue's maximum message size. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00270">270</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> mySend(pmsg, message, size, <a class="code" href="../../d0/d16/pvutils_8cpp.html#a87ffc14d6746aff1937d2819f359bc8f">timeout</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="ttc" id="pvutils_8cpp_html_a87ffc14d6746aff1937d2819f359bc8f"><div class="ttname"><a href="../../d0/d16/pvutils_8cpp.html#a87ffc14d6746aff1937d2819f359bc8f">timeout</a></div><div class="ttdeci">double timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d16/pvutils_8cpp_source.html#l00025">pvutils.cpp:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a699a26197c5b154e461eb559abeb8999"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API void epicsStdCall epicsMessageQueueShow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays some information about the message queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Message queue identifier. </td></tr>
    <tr><td class="paramname">level</td><td>Controls the amount of information displayed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00417">417</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;Message Queue Used:%d  Slots:%lu&quot;</span>,</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="../../d7/d9e/default_2osdMessageQueue_8cpp.html#aaeecb0ea154a215a5cc823dea7748f50">epicsMessageQueuePending</a>(pmsg), pmsg-&gt;capacity);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (level &gt;= 1)</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;  Maximum size:%lu&quot;</span>, pmsg-&gt;maxMessageSize);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div><div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="default_2osdMessageQueue_8cpp_html_aaeecb0ea154a215a5cc823dea7748f50"><div class="ttname"><a href="../../d7/d9e/default_2osdMessageQueue_8cpp.html#aaeecb0ea154a215a5cc823dea7748f50">epicsMessageQueuePending</a></div><div class="ttdeci">LIBCOM_API int epicsStdCall epicsMessageQueuePending(epicsMessageQueueId pmsg)</div><div class="ttdoc">How many messages are queued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00398">osdMessageQueue.cpp:398</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1720b80096b04c40f67ac56e8d74ae6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API int epicsStdCall epicsMessageQueueTryReceive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to receive a message. </p>
<p>If the queue holds at least one message, the first message on the queue is moved to the specified location and the length of that message is returned.</p>
<p>If the received message is larger than the specified message size the implementation may either return -1, or truncate the message. It is most efficient if the messageBufferSize is equal to the maximumMessageSize with which the message queue was created. </p><dl class="section return"><dt>Returns</dt><dd>Number of bytes in the message. </dd>
<dd>
-1 if the message queue is empty, or the buffer too small. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00377">377</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;{</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> myReceive(pmsg, message, size, 0);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7cfa83c566b79d82a2aa246c139d9d7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API int epicsStdCall epicsMessageQueueTrySend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html#a7807f0edc88b2342b85787fd3c88404b">epicsMessageQueueId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>messageSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to send a message. </p>
<dl class="section note"><dt>Note</dt><dd>On VxWorks and RTEMS this routine may be called from an interrupt handler. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the message was sent to a receiver or queued for future delivery. </dd>
<dd>
-1 if no more messages can be queued or if the message is larger than the queue's maximum message size. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html#l00256">256</a> of file <a class="el" href="../../d7/d9e/default_2osdMessageQueue_8cpp_source.html">osdMessageQueue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> mySend(pmsg, message, size, 0);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_e05d7e2b1ecd646af5bb94391405f3b5.html">modules</a></li><li class="navelem"><a class="el" href="../../dir_66ad26243ee5b9e4435a8c38b71879e0.html">libcom</a></li><li class="navelem"><a class="el" href="../../dir_3c26cc65c6aeedab9756b68f4c64367b.html">src</a></li><li class="navelem"><a class="el" href="../../dir_f0116dfafe1625bea69c3ed4ebfa1468.html">osi</a></li><li class="navelem"><a class="el" href="../../d5/d86/epicsMessageQueue_8h.html">epicsMessageQueue.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
