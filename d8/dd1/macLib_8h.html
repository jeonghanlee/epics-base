<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>This is Unofficial EPICS BASE Doxygen Site: modules/libcom/src/macLib/macLib.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../epics.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">This is Unofficial EPICS BASE Doxygen Site
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d8/dd1/macLib_8h.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">macLib.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Text macro substitution routines.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d2/d71/ellLib_8h_source.html">ellLib.h</a>&quot;</code><br />
<code>#include &quot;libComAPI.h&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for macLib.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d20/macLib_8h__incl.png" border="0" usemap="#modules_2libcom_2src_2macLib_2macLib_8h" alt=""/></div>
<map name="modules_2libcom_2src_2macLib_2macLib_8h" id="modules_2libcom_2src_2macLib_2macLib_8h">
<area shape="rect" id="node2" href="../../d2/d71/ellLib_8h.html" title="A doubly&#45;linked list library. " alt="" coords="11,95,77,121"/>
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d72/macLib_8h__dep__incl.png" border="0" usemap="#modules_2libcom_2src_2macLib_2macLib_8hdep" alt=""/></div>
<map name="modules_2libcom_2src_2macLib_2macLib_8hdep" id="modules_2libcom_2src_2macLib_2macLib_8hdep">
<area shape="rect" id="node2" href="../../d5/d03/dbLexRoutines_8c.html" title="modules/database/src\l/ioc/dbStatic/dbLexRoutines.c" alt="" coords="5,95,213,136"/>
<area shape="rect" id="node3" href="../../dc/d72/msi_8cpp.html" title="modules/database/src\l/ioc/dbtemplate/msi.cpp" alt="" coords="237,95,413,136"/>
<area shape="rect" id="node4" href="../../df/d88/asLibRoutines_8c.html" title="modules/libcom/src\l/as/asLibRoutines.c" alt="" coords="437,95,584,136"/>
<area shape="rect" id="node5" href="../../d9/de7/iocsh_8cpp.html" title="modules/libcom/src\l/iocsh/iocsh.cpp" alt="" coords="608,95,755,136"/>
<area shape="rect" id="node6" href="../../d4/d79/macCore_8c.html" title="modules/libcom/src\l/macLib/macCore.c" alt="" coords="779,95,925,136"/>
<area shape="rect" id="node7" href="../../de/d21/macEnv_8c.html" title="modules/libcom/src\l/macLib/macEnv.c" alt="" coords="949,95,1096,136"/>
<area shape="rect" id="node8" href="../../d7/d42/macUtil_8c.html" title="modules/libcom/src\l/macLib/macUtil.c" alt="" coords="1120,95,1267,136"/>
</map>
</div>
</div>
<p><a href="../../d8/dd1/macLib_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro substitution context, for use by macLib routines only.  <a href="../../d5/d76/structMAC__HANDLE.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4c987156ced719bbcf398ab6c76289c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#a4c987156ced719bbcf398ab6c76289c0">MAC_SIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:a4c987156ced719bbcf398ab6c76289c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size of a macro name or value.  <a href="#a4c987156ced719bbcf398ab6c76289c0">More...</a><br /></td></tr>
<tr class="separator:a4c987156ced719bbcf398ab6c76289c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Core Library</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>The core library provides a minimal set of basic operations. </p>
</div></td></tr>
<tr class="memitem:ad21abc31bb8726ce5f5e036e5e3a9c50"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#ad21abc31bb8726ce5f5e036e5e3a9c50">macCreateHandle</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> **handle, const char *pairs[])</td></tr>
<tr class="memdesc:ad21abc31bb8726ce5f5e036e5e3a9c50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new macro substitution context.  <a href="#ad21abc31bb8726ce5f5e036e5e3a9c50">More...</a><br /></td></tr>
<tr class="separator:ad21abc31bb8726ce5f5e036e5e3a9c50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac932a21a9721ab642c9d82e526c7b490"><td class="memItemLeft" align="right" valign="top">LIBCOM_API void epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#ac932a21a9721ab642c9d82e526c7b490">macSuppressWarning</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle, int falseTrue)</td></tr>
<tr class="memdesc:ac932a21a9721ab642c9d82e526c7b490"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable or enable warning messages.  <a href="#ac932a21a9721ab642c9d82e526c7b490">More...</a><br /></td></tr>
<tr class="separator:ac932a21a9721ab642c9d82e526c7b490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6948be35bde61becb9ca2e9a598ef7c"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#ac6948be35bde61becb9ca2e9a598ef7c">macExpandString</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle, const char *src, char *dest, long capacity)</td></tr>
<tr class="memdesc:ac6948be35bde61becb9ca2e9a598ef7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand a string which may contain macro references.  <a href="#ac6948be35bde61becb9ca2e9a598ef7c">More...</a><br /></td></tr>
<tr class="separator:ac6948be35bde61becb9ca2e9a598ef7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a241872a0a52bfeacfbaeb8efb1c3c1d1"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#a241872a0a52bfeacfbaeb8efb1c3c1d1">macPutValue</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle, const char *name, const char *<a class="el" href="../../dc/d07/unionvalue.html">value</a>)</td></tr>
<tr class="memdesc:a241872a0a52bfeacfbaeb8efb1c3c1d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the value of a specific macro.  <a href="#a241872a0a52bfeacfbaeb8efb1c3c1d1">More...</a><br /></td></tr>
<tr class="separator:a241872a0a52bfeacfbaeb8efb1c3c1d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc233285145e8742bb7a88ad2d8033c5"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#afc233285145e8742bb7a88ad2d8033c5">macGetValue</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle, const char *name, char *<a class="el" href="../../dc/d07/unionvalue.html">value</a>, long capacity)</td></tr>
<tr class="memdesc:afc233285145e8742bb7a88ad2d8033c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of a macro.  <a href="#afc233285145e8742bb7a88ad2d8033c5">More...</a><br /></td></tr>
<tr class="separator:afc233285145e8742bb7a88ad2d8033c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3948455e376b9220c97963afa408fd6"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#ae3948455e376b9220c97963afa408fd6">macDeleteHandle</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle)</td></tr>
<tr class="memdesc:ae3948455e376b9220c97963afa408fd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks a handle invalid, and frees all storage associated with it.  <a href="#ae3948455e376b9220c97963afa408fd6">More...</a><br /></td></tr>
<tr class="separator:ae3948455e376b9220c97963afa408fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c984a8d8759e38255713cb7fed3707"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#ad4c984a8d8759e38255713cb7fed3707">macPushScope</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle)</td></tr>
<tr class="memdesc:ad4c984a8d8759e38255713cb7fed3707"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the start of a new scoping level.  <a href="#ad4c984a8d8759e38255713cb7fed3707">More...</a><br /></td></tr>
<tr class="separator:ad4c984a8d8759e38255713cb7fed3707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a244c9927ca4a30a32176dce06329a030"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#a244c9927ca4a30a32176dce06329a030">macPopScope</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle)</td></tr>
<tr class="memdesc:a244c9927ca4a30a32176dce06329a030"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the last pushed scope (like stack operations)  <a href="#a244c9927ca4a30a32176dce06329a030">More...</a><br /></td></tr>
<tr class="separator:a244c9927ca4a30a32176dce06329a030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6a3d0fd4945d5d1612b550ca27251d"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#a7c6a3d0fd4945d5d1612b550ca27251d">macReportMacros</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle)</td></tr>
<tr class="memdesc:a7c6a3d0fd4945d5d1612b550ca27251d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports details of current definitions.  <a href="#a7c6a3d0fd4945d5d1612b550ca27251d">More...</a><br /></td></tr>
<tr class="separator:a7c6a3d0fd4945d5d1612b550ca27251d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Utility Library</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These convenience functions are intended for applications to use and provide a more convenient interface for some purposes. </p>
</div></td></tr>
<tr class="memitem:a9cdb5e58ba48489cd1b3065d4f09251e"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#a9cdb5e58ba48489cd1b3065d4f09251e">macParseDefns</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle, const char *defns, char **pairs[])</td></tr>
<tr class="memdesc:a9cdb5e58ba48489cd1b3065d4f09251e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse macro definitions into an array of {name, value} pairs.  <a href="#a9cdb5e58ba48489cd1b3065d4f09251e">More...</a><br /></td></tr>
<tr class="separator:a9cdb5e58ba48489cd1b3065d4f09251e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbeed6e0e98e619a03de27693a85e7ef"><td class="memItemLeft" align="right" valign="top">LIBCOM_API long epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#abbeed6e0e98e619a03de27693a85e7ef">macInstallMacros</a> (<a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle, char *pairs[])</td></tr>
<tr class="memdesc:abbeed6e0e98e619a03de27693a85e7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Install set of {name, value} pairs as definitions.  <a href="#abbeed6e0e98e619a03de27693a85e7ef">More...</a><br /></td></tr>
<tr class="separator:abbeed6e0e98e619a03de27693a85e7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad374c0e5b619374d0108bb204876d074"><td class="memItemLeft" align="right" valign="top">LIBCOM_API char *epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#ad374c0e5b619374d0108bb204876d074">macEnvExpand</a> (const char *<a class="el" href="../../dd/db2/iocshRegisterCommon_8c.html#a6cf0bc92062f6e3e76450909d1118302">str</a>)</td></tr>
<tr class="memdesc:ad374c0e5b619374d0108bb204876d074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand environment variables in a string.  <a href="#ad374c0e5b619374d0108bb204876d074">More...</a><br /></td></tr>
<tr class="separator:ad374c0e5b619374d0108bb204876d074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae08a8e84331b5a1191e685b5ec232e7e"><td class="memItemLeft" align="right" valign="top">LIBCOM_API char *epicsStdCall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd1/macLib_8h.html#ae08a8e84331b5a1191e685b5ec232e7e">macDefExpand</a> (const char *<a class="el" href="../../dd/db2/iocshRegisterCommon_8c.html#a6cf0bc92062f6e3e76450909d1118302">str</a>, <a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *macros)</td></tr>
<tr class="memdesc:ae08a8e84331b5a1191e685b5ec232e7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expands macros and environment variables in a string.  <a href="#ae08a8e84331b5a1191e685b5ec232e7e">More...</a><br /></td></tr>
<tr class="separator:ae08a8e84331b5a1191e685b5ec232e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Text macro substitution routines. </p>
<dl class="section author"><dt>Author</dt><dd>William Lupton, W. M. Keck Observatory</dd></dl>
<p>This general purpose macro substitution library is used for all macro substitutions in EPICS Base.</p>
<p>Most routines return 0 (OK) on success, -1 (ERROR) on failure, or small positive values for extra info. The <a class="el" href="../../d8/dd1/macLib_8h.html#afc233285145e8742bb7a88ad2d8033c5" title="Returns the value of a macro. ">macGetValue()</a> and <a class="el" href="../../d8/dd1/macLib_8h.html#ac6948be35bde61becb9ca2e9a598ef7c" title="Expand a string which may contain macro references. ">macExpandString()</a> routines depart from this and return information both on success / failure and on value length. Errors and warnings are reported using <a class="el" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf()</a>. </p>

<p>Definition in file <a class="el" href="../../d8/dd1/macLib_8h_source.html">macLib.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a4c987156ced719bbcf398ab6c76289c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAC_SIZE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum size of a macro name or value. </p>

<p>Definition at line <a class="el" href="../../d8/dd1/macLib_8h_source.html#l00036">36</a> of file <a class="el" href="../../d8/dd1/macLib_8h_source.html">macLib.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ad21abc31bb8726ce5f5e036e5e3a9c50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macCreateHandle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> **&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pairs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new macro substitution context. </p>
<dl class="section return"><dt>Returns</dt><dd>0 = OK; &lt;0 = ERROR </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>pointer to variable to receive pointer to new macro substitution context </td></tr>
    <tr><td class="paramname">pairs</td><td>pointer to NULL-terminated array of {name,value} pair strings. A NULL value implies undefined; a NULL <code>pairs</code> argument implies no macros. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00100">100</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle;         <span class="comment">/* pointer to macro substitution context */</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">/* ensure NULL handle pointer is returned on error */</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    *pHandle = <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">/* allocate macro substitution context */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    handle = ( <a class="code" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> * ) <a class="code" href="../../d8/dc6/dbmf_8c.html#a07a2189a33140ab68a59feec32be5700">dbmfMalloc</a>( <span class="keyword">sizeof</span>( <a class="code" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> ) );</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> ( handle == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macCreateHandle: failed to allocate context\n&quot;</span> );</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">/* initialize context */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> = <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a12f9581864c9ea5e99bc180b092cf365">dirty</a> = <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">level</a> = 0;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> = 0;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a1ac1558950ee05e9fde9318e3650b769">flags</a> = 0;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="../../d2/d71/ellLib_8h.html#a8e156d5d6f82dd9c8d18ad3ed0206f70">ellInit</a>( &amp;handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a420d801b9fae0410dc16d4403453bf31">list</a> );</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">/* use environment variables if so specified */</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (pairs &amp;&amp; pairs[0] &amp;&amp; !strcmp(pairs[0],<span class="stringliteral">&quot;&quot;</span>) &amp;&amp; pairs[1] &amp;&amp; !strcmp(pairs[1],<span class="stringliteral">&quot;environ&quot;</span>) &amp;&amp; !pairs[3]) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a1ac1558950ee05e9fde9318e3650b769">flags</a> |= <a class="code" href="../../d4/d79/macCore_8c.html#a675a31a83e603079bdd1a40d427f9af9">FLAG_USE_ENVIRONMENT</a>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="comment">/* if supplied, load macro definitions */</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">for</span> ( ; pairs &amp;&amp; pairs[0]; pairs += 2 ) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="../../d4/d79/macCore_8c.html#a15094b166e0cafbbb8a947f823d394f0">macPutValue</a>( handle, pairs[0], pairs[1] ) &lt; 0 ) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                <a class="code" href="../../d8/dc6/dbmf_8c.html#a40a568e87da8fb11800cd4124d79e254">dbmfFree</a>( handle );</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">/* set returned handle pointer */</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    *pHandle = handle;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="dbDefs_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d00/dbDefs_8h_source.html#l00032">dbDefs.h:32</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a1ac1558950ee05e9fde9318e3650b769"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a1ac1558950ee05e9fde9318e3650b769">MAC_HANDLE::flags</a></div><div class="ttdeci">int flags</div><div class="ttdoc">operating mode flags </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00048">macLib.h:48</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a></div><div class="ttdoc">Macro substitution context, for use by macLib routines only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00042">macLib.h:42</a></div></div>
<div class="ttc" id="dbmf_8c_html_a40a568e87da8fb11800cd4124d79e254"><div class="ttname"><a href="../../d8/dc6/dbmf_8c.html#a40a568e87da8fb11800cd4124d79e254">dbmfFree</a></div><div class="ttdeci">void dbmfFree(void *mem)</div><div class="ttdoc">Free the memory allocated by dbmfMalloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/dbmf_8c_source.html#l00175">dbmf.c:175</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a12f9581864c9ea5e99bc180b092cf365"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a12f9581864c9ea5e99bc180b092cf365">MAC_HANDLE::dirty</a></div><div class="ttdeci">int dirty</div><div class="ttdoc">values need expanding from raw values? </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00044">macLib.h:44</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a420d801b9fae0410dc16d4403453bf31"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a420d801b9fae0410dc16d4403453bf31">MAC_HANDLE::list</a></div><div class="ttdeci">ELLLIST list</div><div class="ttdoc">macro name / value list </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00047">macLib.h:47</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
<div class="ttc" id="ellLib_8h_html_a8e156d5d6f82dd9c8d18ad3ed0206f70"><div class="ttname"><a href="../../d2/d71/ellLib_8h.html#a8e156d5d6f82dd9c8d18ad3ed0206f70">ellInit</a></div><div class="ttdeci">#define ellInit(PLIST)</div><div class="ttdoc">Initialize a list type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d71/ellLib_8h_source.html#l00076">ellLib.h:76</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_ae5e816d5f942715d20ff18b1fb8bc87d"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">MAC_HANDLE::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">scoping level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00045">macLib.h:45</a></div></div>
<div class="ttc" id="macCore_8c_html_a15094b166e0cafbbb8a947f823d394f0"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#a15094b166e0cafbbb8a947f823d394f0">macPutValue</a></div><div class="ttdeci">long epicsStdCall macPutValue(MAC_HANDLE *handle, const char *name, const char *value)</div><div class="ttdoc">Sets the value of a specific macro. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00233">macCore.c:233</a></div></div>
<div class="ttc" id="dbmf_8c_html_a07a2189a33140ab68a59feec32be5700"><div class="ttname"><a href="../../d8/dc6/dbmf_8c.html#a07a2189a33140ab68a59feec32be5700">dbmfMalloc</a></div><div class="ttdeci">void * dbmfMalloc(size_t size)</div><div class="ttdoc">Allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/dbmf_8c_source.html#l00097">dbmf.c:97</a></div></div>
<div class="ttc" id="macCore_8c_html_a675a31a83e603079bdd1a40d427f9af9"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#a675a31a83e603079bdd1a40d427f9af9">FLAG_USE_ENVIRONMENT</a></div><div class="ttdeci">#define FLAG_USE_ENVIRONMENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00089">macCore.c:89</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae08a8e84331b5a1191e685b5ec232e7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API char* epicsStdCall macDefExpand </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>macros</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expands macros and environment variables in a string. </p>
<dl class="section return"><dt>Returns</dt><dd>Expanded string; NULL if any undefined macros were used.</dd></dl>
<p>This routine is similar to <a class="el" href="../../d8/dd1/macLib_8h.html#ad374c0e5b619374d0108bb204876d074" title="Expand environment variables in a string. ">macEnvExpand()</a> but allows an optional handle to be passed in that may contain additional macro definitions. These macros are appended to the set of macros from environment variables when expanding the string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>string to be expanded </td></tr>
    <tr><td class="paramname">macros</td><td>opaque handle; may be NULL if only environment variables are to be used </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d21/macEnv_8c_source.html#l00026">26</a> of file <a class="el" href="../../de/d21/macEnv_8c_source.html">macEnv.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *handle;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * pairs[] = { <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;environ&quot;</span>, <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordtype">long</span> destCapacity = 128;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordtype">char</span> *dest = <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordtype">int</span> n;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">if</span> (macros) {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        handle = macros;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d79/macCore_8c.html#ae9419d7274251948ed3b51c2921c345c">macCreateHandle</a>(&amp;handle, pairs)){</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            <a class="code" href="../../d5/df8/errlog_8c.html#a17bbc05f536724b13fd8060a1f4417dd">errlogMessage</a>(<span class="stringliteral">&quot;macDefExpand: macCreateHandle failed.&quot;</span>);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        }</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    }</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        destCapacity *= 2;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">         * Use free/malloc rather than realloc since there&#39;s no need to</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">         * keep the original contents.</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        free(dest);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        dest = malloc(destCapacity);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keywordflow">if</span>(!dest)</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d4/de5/antelope_8c.html#aef63a5570c7d4ca2b11b69562e5f9b8f">done</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        n = <a class="code" href="../../d4/d79/macCore_8c.html#afa049d0f6e272d97ceaec4b730f660ce">macExpandString</a>(handle, <a class="code" href="../../dd/db2/iocshRegisterCommon_8c.html#a6cf0bc92062f6e3e76450909d1118302">str</a>, dest, destCapacity);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    } <span class="keywordflow">while</span> (n &gt;= (destCapacity - 1));</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (n &lt; 0) {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        free(dest);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        dest = <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordtype">size_t</span> unused = destCapacity - ++n;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">if</span> (unused &gt;= 20)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            dest = realloc(dest, n);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<a class="code" href="../../d4/de5/antelope_8c.html#aef63a5570c7d4ca2b11b69562e5f9b8f">done</a>:</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">if</span> (macros == NULL) {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d79/macCore_8c.html#aac6e30799548596355d072da8ac42b51">macDeleteHandle</a>(handle)) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <a class="code" href="../../d5/df8/errlog_8c.html#a17bbc05f536724b13fd8060a1f4417dd">errlogMessage</a>(<span class="stringliteral">&quot;macDefExpand: macDeleteHandle failed.&quot;</span>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div><div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="iocshRegisterCommon_8c_html_a6cf0bc92062f6e3e76450909d1118302"><div class="ttname"><a href="../../dd/db2/iocshRegisterCommon_8c.html#a6cf0bc92062f6e3e76450909d1118302">str</a></div><div class="ttdeci">#define str(v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db2/iocshRegisterCommon_8c_source.html#l00026">iocshRegisterCommon.c:26</a></div></div>
<div class="ttc" id="macCore_8c_html_afa049d0f6e272d97ceaec4b730f660ce"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#afa049d0f6e272d97ceaec4b730f660ce">macExpandString</a></div><div class="ttdeci">long epicsStdCall macExpandString(MAC_HANDLE *handle, const char *src, char *dest, long capacity)</div><div class="ttdoc">Expand a string which may contain macro references. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00174">macCore.c:174</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a></div><div class="ttdoc">Macro substitution context, for use by macLib routines only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00042">macLib.h:42</a></div></div>
<div class="ttc" id="errlog_8c_html_a17bbc05f536724b13fd8060a1f4417dd"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a17bbc05f536724b13fd8060a1f4417dd">errlogMessage</a></div><div class="ttdeci">int errlogMessage(const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00180">errlog.c:180</a></div></div>
<div class="ttc" id="macCore_8c_html_aac6e30799548596355d072da8ac42b51"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aac6e30799548596355d072da8ac42b51">macDeleteHandle</a></div><div class="ttdeci">long epicsStdCall macDeleteHandle(MAC_HANDLE *handle)</div><div class="ttdoc">Marks a handle invalid, and frees all storage associated with it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00360">macCore.c:360</a></div></div>
<div class="ttc" id="macCore_8c_html_ae9419d7274251948ed3b51c2921c345c"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#ae9419d7274251948ed3b51c2921c345c">macCreateHandle</a></div><div class="ttdeci">long epicsStdCall macCreateHandle(MAC_HANDLE **pHandle, const char *pairs[])</div><div class="ttdoc">Creates a new macro substitution context. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00100">macCore.c:100</a></div></div>
<div class="ttc" id="antelope_8c_html_aef63a5570c7d4ca2b11b69562e5f9b8f"><div class="ttname"><a href="../../d4/de5/antelope_8c.html#aef63a5570c7d4ca2b11b69562e5f9b8f">done</a></div><div class="ttdeci">void done(int k)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de5/antelope_8c_source.html#l00077">antelope.c:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae3948455e376b9220c97963afa408fd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macDeleteHandle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks a handle invalid, and frees all storage associated with it. </p>
<dl class="section return"><dt>Returns</dt><dd>0 = OK; &lt;0 = ERROR </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Note that this does not free any strings into which macro values have been returned. Macro values are always returned into strings which were pre-allocated by the caller. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00360">360</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="../../d8/d15/structmac__entry.html">MAC_ENTRY</a> *<a class="code" href="../../d8/df9/classentry.html">entry</a>, *nextEntry;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">/* check handle */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> ( handle == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> != <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a> ) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macDeleteHandle: NULL or invalid handle\n&quot;</span> );</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macDeleteHandle()\n&quot;</span> );</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">/* delete all entries */</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">for</span> ( entry = first( handle ); entry != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; entry = nextEntry ) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        nextEntry = next( entry );</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keyword">delete</span>( handle, entry );</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">/* clear magic field and free context structure */</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> = 0;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="../../d8/dc6/dbmf_8c.html#a40a568e87da8fb11800cd4124d79e254">dbmfFree</a>( handle );</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="dbmf_8c_html_a40a568e87da8fb11800cd4124d79e254"><div class="ttname"><a href="../../d8/dc6/dbmf_8c.html#a40a568e87da8fb11800cd4124d79e254">dbmfFree</a></div><div class="ttdeci">void dbmfFree(void *mem)</div><div class="ttdoc">Free the memory allocated by dbmfMalloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/dbmf_8c_source.html#l00175">dbmf.c:175</a></div></div>
<div class="ttc" id="structmac__entry_html"><div class="ttname"><a href="../../d8/d15/structmac__entry.html">mac_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00039">macCore.c:39</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="classentry_html"><div class="ttname"><a href="../../d8/df9/classentry.html">entry</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad374c0e5b619374d0108bb204876d074"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API char* epicsStdCall macEnvExpand </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expand environment variables in a string. </p>
<dl class="section return"><dt>Returns</dt><dd>Expanded string; NULL if any undefined macros were used.</dd></dl>
<p>This routine expands a string which may contain macros that are environment variables. It parses the string looking for such references and passes them to <a class="el" href="../../d8/dd1/macLib_8h.html#afc233285145e8742bb7a88ad2d8033c5" title="Returns the value of a macro. ">macGetValue()</a> for translation. It uses malloc() to allocate space for the expanded string and returns a pointer to this null-terminated string. It returns NULL if the source string contains any undefined references. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>string to be expanded </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d21/macEnv_8c_source.html#l00020">20</a> of file <a class="el" href="../../de/d21/macEnv_8c_source.html">macEnv.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;{</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d21/macEnv_8c.html#a82b6250e6522a6869bf1d238bb9a4aca">macDefExpand</a>(<a class="code" href="../../dd/db2/iocshRegisterCommon_8c.html#a6cf0bc92062f6e3e76450909d1118302">str</a>, <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;}</div><div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="iocshRegisterCommon_8c_html_a6cf0bc92062f6e3e76450909d1118302"><div class="ttname"><a href="../../dd/db2/iocshRegisterCommon_8c.html#a6cf0bc92062f6e3e76450909d1118302">str</a></div><div class="ttdeci">#define str(v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db2/iocshRegisterCommon_8c_source.html#l00026">iocshRegisterCommon.c:26</a></div></div>
<div class="ttc" id="macEnv_8c_html_a82b6250e6522a6869bf1d238bb9a4aca"><div class="ttname"><a href="../../de/d21/macEnv_8c.html#a82b6250e6522a6869bf1d238bb9a4aca">macDefExpand</a></div><div class="ttdeci">char *epicsStdCall macDefExpand(const char *str, MAC_HANDLE *macros)</div><div class="ttdoc">Expands macros and environment variables in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d21/macEnv_8c_source.html#l00026">macEnv.c:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac6948be35bde61becb9ca2e9a598ef7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macExpandString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expand a string which may contain macro references. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the length of the expanded string, &lt;0 if any macro are undefined</dd></dl>
<p>This routine parses the <code>src</code> string looking for macro references and passes any it finds to <a class="el" href="../../d8/dd1/macLib_8h.html#afc233285145e8742bb7a88ad2d8033c5" title="Returns the value of a macro. ">macGetValue()</a> for translation.</p>
<dl class="section note"><dt>Note</dt><dd>The return value is similar to that of <a class="el" href="../../d8/dd1/macLib_8h.html#afc233285145e8742bb7a88ad2d8033c5" title="Returns the value of a macro. ">macGetValue()</a>. Its absolute value is the number of characters copied to <code>dest</code>. If the return value is negative, at least one undefined macro was left unexpanded. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
    <tr><td class="paramname">src</td><td>source string </td></tr>
    <tr><td class="paramname">dest</td><td>destination string </td></tr>
    <tr><td class="paramname">capacity</td><td>capacity of destination buffer (dest) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00174">174</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="../../d8/d15/structmac__entry.html">MAC_ENTRY</a> <a class="code" href="../../d8/df9/classentry.html">entry</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">char</span> *d;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">long</span> length;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">/* check handle */</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> ( handle == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> != <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a> ) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macExpandString: NULL or invalid handle\n&quot;</span> );</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macExpandString( %s, capacity = %ld )\n&quot;</span>, src, capacity );</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">/* Check size */</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (capacity &lt;= 1)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* expand raw values if necessary */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> ( expand( handle ) &lt; 0 )</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macExpandString: failed to expand raw values\n&quot;</span> );</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">/* fill in necessary fields in fake macro entry structure */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    entry.<a class="code" href="../../d8/d15/structmac__entry.html#a5b58166dd113ac9602a463ada81abae2">name</a>  = (<span class="keywordtype">char</span> *) src;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    entry.<a class="code" href="../../d8/d15/structmac__entry.html#ac72c0d4e430673977e55113e0f7d3287">type</a>  = <span class="stringliteral">&quot;string&quot;</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    entry.<a class="code" href="../../d8/d15/structmac__entry.html#a27b2a72700279f192114f204e07f20ee">error</a> = <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">/* expand the string */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    s  = src;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    d  = dest;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    *d = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    trans( handle, &amp;entry, 0, <span class="stringliteral">&quot;&quot;</span>, &amp;s, &amp;d, d + capacity - 1 );</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">/* return +/- #chars copied depending on successful expansion */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    length = d - dest;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    length = ( entry.<a class="code" href="../../d8/d15/structmac__entry.html#a27b2a72700279f192114f204e07f20ee">error</a> ) ? -length : length;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macExpandString() -&gt; %ld\n&quot;</span>, length );</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> length;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="dbDefs_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d00/dbDefs_8h_source.html#l00032">dbDefs.h:32</a></div></div>
<div class="ttc" id="structmac__entry_html_ac72c0d4e430673977e55113e0f7d3287"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#ac72c0d4e430673977e55113e0f7d3287">mac_entry::type</a></div><div class="ttdeci">char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00042">macCore.c:42</a></div></div>
<div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structmac__entry_html_a5b58166dd113ac9602a463ada81abae2"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#a5b58166dd113ac9602a463ada81abae2">mac_entry::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00041">macCore.c:41</a></div></div>
<div class="ttc" id="structmac__entry_html"><div class="ttname"><a href="../../d8/d15/structmac__entry.html">mac_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00039">macCore.c:39</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="structmac__entry_html_a27b2a72700279f192114f204e07f20ee"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#a27b2a72700279f192114f204e07f20ee">mac_entry::error</a></div><div class="ttdeci">int error</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00046">macCore.c:46</a></div></div>
<div class="ttc" id="classentry_html"><div class="ttname"><a href="../../d8/df9/classentry.html">entry</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afc233285145e8742bb7a88ad2d8033c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macGetValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the value of a macro. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the length of the value string, &lt;0 if undefined</dd></dl>
<p><code>value</code> will be zero-terminated if the length of the value is less than <code>capacity</code>. The return value is the number of characters copied to <code>value</code> (see below for behavior if the macro is undefined). If <code>capacity</code> is zero, no characters will be copied to <code>value</code> (which may be NULL) and the call can be used to check whether the macro is defined.</p>
<dl class="section note"><dt>Note</dt><dd>Truncation of the value is not reported, applications should assume that truncation has occurred if the return value is equal to capacity.</dd></dl>
<p>If the macro is undefined, the macro reference will be returned in the value string (if permitted by maxlen) and the function value will be <em>minus</em> the number of characters copied. Note that treatment of <code>capacity</code> is intended to be consistent with the strncpy() routine.</p>
<p>If the value contains macro references, these references will be expanded recursively. This expansion will detect a direct or indirect self reference.</p>
<p>Macro references begin with a "$" immediately followed by either a "(" or a "{" character. The macro name comes next, and may optionally be succeeded by an "=" and a default value, which will be returned if the named macro is undefined at the moment of expansion. A reference is terminated by the matching ")" or "}" character. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
    <tr><td class="paramname">name</td><td>macro name or reference </td></tr>
    <tr><td class="paramname">value</td><td>string to receive macro value or name argument if macro is undefined </td></tr>
    <tr><td class="paramname">capacity</td><td>capacity of destination buffer (value) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00301">301</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../d8/d15/structmac__entry.html">MAC_ENTRY</a>   *<a class="code" href="../../d8/df9/classentry.html">entry</a>;         <span class="comment">/* pointer to this macro&#39;s entry structure */</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">long</span>        length;         <span class="comment">/* number of characters returned */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">/* check handle */</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> ( handle == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> != <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a> ) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macGetValue: NULL or invalid handle\n&quot;</span> );</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macGetValue( %s )\n&quot;</span>, name );</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">/* look up macro name */</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    entry = lookup( handle, name, <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">/* if capacity &lt;= 1 or VALUE == NULL just return -1 / 0 for undefined /</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">       defined macro */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> ( capacity &lt;= 1 || <a class="code" href="../../dc/d07/unionvalue.html">value</a> == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">return</span> ( entry == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) ? -1 : 0;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">/* if not found, copy name to value and return minus #chars copied */</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> ( entry == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        strncpy( <a class="code" href="../../dc/d07/unionvalue.html">value</a>, name, capacity );</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">return</span> ( <a class="code" href="../../dc/d07/unionvalue.html">value</a>[capacity-1] == <span class="charliteral">&#39;\0&#39;</span> ) ? - (long) strlen( name ) : -capacity;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">/* expand raw values if necessary; if fail (can only fail because of</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">       memory allocation failure), return same as if not found */</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> ( expand( handle ) &lt; 0 ) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macGetValue: failed to expand raw values\n&quot;</span> );</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        strncpy( <a class="code" href="../../dc/d07/unionvalue.html">value</a>, name, capacity );</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">return</span> ( <a class="code" href="../../dc/d07/unionvalue.html">value</a>[capacity-1] == <span class="charliteral">&#39;\0&#39;</span> ) ? - (long) strlen( name ) : -capacity;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">/* copy value and return +/- #chars copied depending on successful</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">       expansion */</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    strncpy( <a class="code" href="../../dc/d07/unionvalue.html">value</a>, entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#aab28ad9988e47e816d3a1b5e8770cafd">value</a>, capacity );</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    length = ( <a class="code" href="../../dc/d07/unionvalue.html">value</a>[capacity-1] == <span class="charliteral">&#39;\0&#39;</span> ) ? entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#a3bd3cb799d6d0a880d49de1c5e7266cb">length</a> : capacity;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    return ( entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#a27b2a72700279f192114f204e07f20ee">error</a> ) ? -length : length;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="unionvalue_html"><div class="ttname"><a href="../../dc/d07/unionvalue.html">value</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3c/link_8h_source.html#l00174">link.h:174</a></div></div>
<div class="ttc" id="dbDefs_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d00/dbDefs_8h_source.html#l00032">dbDefs.h:32</a></div></div>
<div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="structmac__entry_html_aab28ad9988e47e816d3a1b5e8770cafd"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#aab28ad9988e47e816d3a1b5e8770cafd">mac_entry::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00044">macCore.c:44</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structmac__entry_html"><div class="ttname"><a href="../../d8/d15/structmac__entry.html">mac_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00039">macCore.c:39</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="structmac__entry_html_a27b2a72700279f192114f204e07f20ee"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#a27b2a72700279f192114f204e07f20ee">mac_entry::error</a></div><div class="ttdeci">int error</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00046">macCore.c:46</a></div></div>
<div class="ttc" id="classentry_html"><div class="ttname"><a href="../../d8/df9/classentry.html">entry</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
<div class="ttc" id="structmac__entry_html_a3bd3cb799d6d0a880d49de1c5e7266cb"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#a3bd3cb799d6d0a880d49de1c5e7266cb">mac_entry::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00045">macCore.c:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abbeed6e0e98e619a03de27693a85e7ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macInstallMacros </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pairs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Install set of {name, value} pairs as definitions. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of macros defined; &lt;0 = ERROR</dd></dl>
<p>This takes an array of pairs as defined above and installs them as definitions by calling <a class="el" href="../../d8/dd1/macLib_8h.html#a241872a0a52bfeacfbaeb8efb1c3c1d1" title="Sets the value of a specific macro. ">macPutValue()</a>. The pairs array is terminated by a NULL pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
    <tr><td class="paramname">pairs</td><td>pointer to NULL-terminated array of {name,value} pair strings; a NULL value implies undefined; a NULL argument implies no macros </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d42/macUtil_8c_source.html#l00253">253</a> of file <a class="el" href="../../d7/d42/macUtil_8c_source.html">macUtil.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">int</span> n;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">char</span> **p;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macInstallMacros( %s, %s, ... )\n&quot;</span>,</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                pairs &amp;&amp; pairs[0] ? pairs[0] : <span class="stringliteral">&quot;NULL&quot;</span>,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                pairs &amp;&amp; pairs[1] ? pairs[1] : <span class="stringliteral">&quot;NULL&quot;</span> );</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">/* go through array defining macros */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">for</span> ( n = 0, p = pairs; p != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; p[0] != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; n++, p += 2 ) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d4/d79/macCore_8c.html#a15094b166e0cafbbb8a947f823d394f0">macPutValue</a>( handle, p[0], p[1] ) &lt; 0 )</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macInstallMacros() -&gt; %d\n&quot;</span>, n );</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">/* return number of macros defined */</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">return</span> n;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div><div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
<div class="ttc" id="macCore_8c_html_a15094b166e0cafbbb8a947f823d394f0"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#a15094b166e0cafbbb8a947f823d394f0">macPutValue</a></div><div class="ttdeci">long epicsStdCall macPutValue(MAC_HANDLE *handle, const char *name, const char *value)</div><div class="ttdoc">Sets the value of a specific macro. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00233">macCore.c:233</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9cdb5e58ba48489cd1b3065d4f09251e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macParseDefns </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>defns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pairs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse macro definitions into an array of {name, value} pairs. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of macros found; &lt;0 = ERROR</dd></dl>
<p>This takes a set of macro definitions in "a=xxx,b=yyy" format and converts them into an array of pointers to character strings which are, in order, "first name", "first value", "second name", "second
value" etc. The array is terminated with two NULL pointers and all storage is allocated contiguously so that it can be freed with a single call to free().</p>
<p>This routine is independent of any handle and provides a generally useful service which may be used elsewhere. Any macro references in values are not expanded at this point since the referenced macros may be defined or redefined before the macro actually has to be translated.</p>
<p>Shell-style escapes and quotes are supported, as are things like "A=B,B=$(C$(A)),CA=CA,CB=CB" (sets B to "CB"). White space is significant within values but ignored elsewhere (i.e. surrounding "=" and "," characters).</p>
<p>The function returns the number of definitions encountered, or -1 if the supplied string is invalid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle; may be NULL if debug messages are not required. </td></tr>
    <tr><td class="paramname">defns</td><td>macro definitions in "a=xxx,b=yyy" format </td></tr>
    <tr><td class="paramname">pairs</td><td>address of variable to receive pointer to NULL-terminated array of {name, value} pair strings; all storage is allocated contiguously </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d42/macUtil_8c_source.html#l00032">32</a> of file <a class="el" href="../../d7/d42/macUtil_8c_source.html">macUtil.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> altNumMax = 4;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">size_t</span> numMax;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d0/d3e/scan_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordtype">int</span> num;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/db2/iocshRegisterCommon_8c.html#a5618bd0620599ca4495bff648e36d860">quote</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">int</span> escape;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordtype">size_t</span> nbytes;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> **ptr;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> **end;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">int</span> *del;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordtype">char</span> *memCp, **memCpp;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *c;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">char</span> *s, *d, **p;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">enum</span> { preName, inName, preValue, inValue } state;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> ( handle &amp;&amp; (handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1) )</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macParseDefns( %s )\n&quot;</span>, defns );</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">/* allocate temporary pointer arrays; in worst case they need to have</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">       as many entries as the length of the defns string */</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    numMax = strlen( defns );</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> ( numMax &lt; altNumMax )</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        numMax = altNumMax;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    ptr = (<span class="keyword">const</span> <span class="keywordtype">char</span> **) calloc( numMax, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> * ) );</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    end = (<span class="keyword">const</span> <span class="keywordtype">char</span> **) calloc( numMax, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> * ) );</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    del = (<span class="keywordtype">int</span> *) calloc( numMax, <span class="keyword">sizeof</span>( <span class="keywordtype">int</span> ) );</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span> ( ptr == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || end == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>  || del == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) <span class="keywordflow">goto</span> error;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">/* go through definitions, noting pointers to starts and ends of macro</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">       names and values; honor quotes and escapes; ignore white space</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">       around assignment and separator characters */</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    num    = 0;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    del[0] = <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    quote  = 0;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    state  = preName;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">for</span> ( c = (<span class="keyword">const</span> <span class="keywordtype">char</span> *) defns; *c != <span class="charliteral">&#39;\0&#39;</span>; c++ ) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">/* handle quotes */</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">if</span> ( quote )</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            quote = ( *c == <a class="code" href="../../dd/db2/iocshRegisterCommon_8c.html#a5618bd0620599ca4495bff648e36d860">quote</a> ) ? 0 : quote;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *c == <span class="charliteral">&#39;\&#39;&#39;</span> || *c == <span class="charliteral">&#39;&quot;&#39;</span> )</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            quote = *c;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="comment">/* handle escapes (pointer incremented below) */</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        escape = ( *c == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; *( c + 1 ) != <span class="charliteral">&#39;\0&#39;</span> );</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">switch</span> ( state ) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;          <span class="keywordflow">case</span> preName:</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">if</span> ( !quote &amp;&amp; !escape &amp;&amp; ( isspace( (<span class="keywordtype">int</span>) *c ) || *c == <span class="charliteral">&#39;,&#39;</span> ) ) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            ptr[num] = c;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            state = inName;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="comment">/* fall through (may be empty name) */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;          <span class="keywordflow">case</span> inName:</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="keywordflow">if</span> ( quote || escape || ( *c != <span class="charliteral">&#39;=&#39;</span> &amp;&amp; *c != <span class="charliteral">&#39;,&#39;</span> ) ) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            end[num] = c;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="keywordflow">while</span> ( end[num] &gt; ptr[num] &amp;&amp; isspace( (<span class="keywordtype">int</span>) *( end[num] - 1 ) ) )</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                end[num]--;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            num++;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            del[num] = <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            state = preValue;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">if</span> ( *c != <span class="charliteral">&#39;,&#39;</span> ) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            del[num] = <a class="code" href="../../da/d00/dbDefs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="comment">/* fall through (&#39;,&#39;; will delete) */</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;          <span class="keywordflow">case</span> preValue:</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">if</span> ( !quote &amp;&amp; !escape &amp;&amp; isspace( (<span class="keywordtype">int</span>) *c ) ) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            ptr[num] = c;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            state = inValue;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="comment">/* fall through (may be empty value) */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;          <span class="keywordflow">case</span> inValue:</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">if</span> ( quote || escape || *c != <span class="charliteral">&#39;,&#39;</span> ) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            end[num] = c;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordflow">while</span> ( end[num] &gt; ptr[num] &amp;&amp; isspace( (<span class="keywordtype">int</span>) *( end[num] - 1 ) ) )</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                end[num]--;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            num++;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            del[num] = <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            state = preName;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">/* if this was escape, increment pointer now (couldn&#39;t do</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">           before because could have ignored escape at start of name</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">           or value) */</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">if</span> ( escape ) c++;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">/* tidy up from state at end of string */</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">switch</span> ( state ) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">case</span> preName:</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">case</span> inName:</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        end[num] = c;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">while</span> ( end[num] &gt; ptr[num] &amp;&amp; isspace( (<span class="keywordtype">int</span>) *( end[num] - 1 ) ) )</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            end[num]--;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        num++;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        del[num] = <a class="code" href="../../da/d00/dbDefs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">case</span> preValue:</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        ptr[num] = c;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordflow">case</span> inValue:</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        end[num] = c;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">while</span> ( end[num] &gt; ptr[num] &amp;&amp; isspace( (<span class="keywordtype">int</span>) *( end[num] - 1 ) ) )</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            end[num]--;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        num++;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        del[num] = <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> ( handle != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 4 )</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">for</span> ( i = 0; i &lt; num; i += 2 )</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;[%ld] %.*s = [%ld] %.*s (%s) (%s)\n&quot;</span>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    (<span class="keywordtype">long</span>) (end[i+0] - ptr[i+0]), (<span class="keywordtype">int</span>) (end[i+0] - ptr[i+0]), ptr[i+0],</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    (<span class="keywordtype">long</span>) (end[i+1] - ptr[i+1]), (<span class="keywordtype">int</span>) (end[i+1] - ptr[i+1]), ptr[i+1],</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    del[i+0] ? <span class="stringliteral">&quot;del&quot;</span> : <span class="stringliteral">&quot;nodel&quot;</span>,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    del[i+1] ? <span class="stringliteral">&quot;del&quot;</span> : <span class="stringliteral">&quot;nodel&quot;</span> );</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">/* calculate how much memory to allocate: pointers followed by</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">       strings */</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    nbytes = ( num + 2 ) * <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> * );</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; num; i++ )</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        nbytes += end[i] - ptr[i] + 1;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">/* allocate memory and set returned pairs pointer */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    memCp = malloc( nbytes );</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> ( memCp == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) <span class="keywordflow">goto</span> error;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    memCpp = ( <span class="keywordtype">char</span> ** ) memCp;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    *pairs = memCpp;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">/* copy pointers and strings (memCpp accesses the pointer section</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">       and memCp accesses the string section) */</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    memCp += ( num + 2 ) * <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> * );</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; num; i++ ) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">/* if no &#39;=&#39; followed the name, macro will be deleted */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> ( del[i] )</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            *memCpp++ = <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            *memCpp++ = memCp;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">/* copy value regardless of the above */</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        strncpy( memCp, (<span class="keyword">const</span> <span class="keywordtype">char</span> *) ptr[i], end[i] - ptr[i] );</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        memCp += end[<a class="code" href="../../d0/d3e/scan_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - ptr[<a class="code" href="../../d0/d3e/scan_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        *memCp++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">/* add two NULL pointers */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    *memCpp++ = <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    *memCpp++ = <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">/* remove quotes and escapes from names in place (unlike values, they</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">       will not be re-parsed) */</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">for</span> ( p = *pairs; *p != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; p += 2 ) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        quote = 0;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">for</span> ( s = d = *p; *s != <span class="charliteral">&#39;\0&#39;</span>; s++ ) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="comment">/* quotes are not copied */</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">if</span> ( quote ) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <span class="keywordflow">if</span> ( *s == quote ) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    quote = 0;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *s == <span class="charliteral">&#39;\&#39;&#39;</span> || *s == <span class="charliteral">&#39;&quot;&#39;</span> ) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                quote = *s;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="comment">/* escapes are not copied but next character is */</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span> ( *s == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; *( s + 1 ) != <span class="charliteral">&#39;\0&#39;</span> )</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                s++;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="comment">/* others are copied */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            *d++ = *s;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">/* need to terminate destination */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        *d++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">/* free workspace */</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    free( ( <span class="keywordtype">void</span> * ) ptr );</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    free( ( <span class="keywordtype">void</span> * ) end );</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    free( ( <span class="keywordtype">char</span> * ) del );</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">if</span> ( handle != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macParseDefns() -&gt; %d\n&quot;</span>, num / 2 );</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">/* success exit; return number of definitions */</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> num / 2;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">/* error exit */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;error:</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macParseDefns: failed to allocate memory\n&quot;</span> );</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> ( ptr != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) free( ( <span class="keywordtype">void</span> * ) ptr );</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> ( end != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) free( ( <span class="keywordtype">void</span> * ) end );</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> ( del != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) free( ( <span class="keywordtype">char</span> * ) del );</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    *pairs = <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div><div class="ttc" id="dbDefs_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d00/dbDefs_8h_source.html#l00032">dbDefs.h:32</a></div></div>
<div class="ttc" id="iocshRegisterCommon_8c_html_a5618bd0620599ca4495bff648e36d860"><div class="ttname"><a href="../../dd/db2/iocshRegisterCommon_8c.html#a5618bd0620599ca4495bff648e36d860">quote</a></div><div class="ttdeci">#define quote(v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db2/iocshRegisterCommon_8c_source.html#l00025">iocshRegisterCommon.c:25</a></div></div>
<div class="ttc" id="scan_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d0/d3e/scan_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3e/scan_8c_source.html#l00967">scan.c:967</a></div></div>
<div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
<div class="ttc" id="dbDefs_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../da/d00/dbDefs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d00/dbDefs_8h_source.html#l00027">dbDefs.h:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a244c9927ca4a30a32176dce06329a030"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macPopScope </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the last pushed scope (like stack operations) </p>
<dl class="section return"><dt>Returns</dt><dd>0 = OK; &lt;0 = ERROR</dd></dl>
<p>See <a class="el" href="../../d8/dd1/macLib_8h.html#ad4c984a8d8759e38255713cb7fed3707" title="Marks the start of a new scoping level. ">macPushScope()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00427">427</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;{</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="../../d8/d15/structmac__entry.html">MAC_ENTRY</a> *<a class="code" href="../../d8/df9/classentry.html">entry</a>, *nextEntry;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">/* check handle */</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> ( handle == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> != <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a> ) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macPopScope: NULL or invalid handle\n&quot;</span> );</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macPopScope()\n&quot;</span> );</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">/* check scoping level isn&#39;t already zero */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">level</a> == 0 ) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macPopScope: no scope to pop\n&quot;</span> );</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">/* look up most recent scope entry */</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    entry = lookup( handle, <span class="stringliteral">&quot;&lt;scope&gt;&quot;</span>, <a class="code" href="../../da/d00/dbDefs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> ( entry == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macPopScope: no scope to pop\n&quot;</span> );</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">/* delete scope entry and all macros defined since it */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">for</span> ( ; entry != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; entry = nextEntry ) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        nextEntry = next( entry );</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keyword">delete</span>( handle, entry );</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">/* decrement scoping level */</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">level</a>--;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structmac__entry_html"><div class="ttname"><a href="../../d8/d15/structmac__entry.html">mac_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00039">macCore.c:39</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="classentry_html"><div class="ttname"><a href="../../d8/df9/classentry.html">entry</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
<div class="ttc" id="dbDefs_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../da/d00/dbDefs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d00/dbDefs_8h_source.html#l00027">dbDefs.h:27</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_ae5e816d5f942715d20ff18b1fb8bc87d"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">MAC_HANDLE::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">scoping level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00045">macLib.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad4c984a8d8759e38255713cb7fed3707"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macPushScope </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks the start of a new scoping level. </p>
<dl class="section return"><dt>Returns</dt><dd>0 = OK; &lt;0 = ERROR</dd></dl>
<p>Marks all macro definitions added after this call as belonging to another scope. These macros will be lost on a <a class="el" href="../../d8/dd1/macLib_8h.html#a244c9927ca4a30a32176dce06329a030" title="Retrieve the last pushed scope (like stack operations) ">macPopScope()</a> call and those at the current scope will be re-instated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00392">392</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;{</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="../../d8/d15/structmac__entry.html">MAC_ENTRY</a> *<a class="code" href="../../d8/df9/classentry.html">entry</a>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">/* check handle */</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> ( handle == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> != <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a> ) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macPushScope: NULL or invalid handle\n&quot;</span> );</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">/* debug output */</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macPushScope()\n&quot;</span> );</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">/* increment scoping level */</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">level</a>++;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">/* create new &quot;special&quot; entry of name &quot;&lt;scope&gt;&quot; */</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    entry = create( handle, <span class="stringliteral">&quot;&lt;scope&gt;&quot;</span>, <a class="code" href="../../da/d00/dbDefs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> ( entry == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">level</a>--;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macPushScope: failed to push scope\n&quot;</span> );</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#ac72c0d4e430673977e55113e0f7d3287">type</a> = <span class="stringliteral">&quot;scope marker&quot;</span>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="structmac__entry_html_ac72c0d4e430673977e55113e0f7d3287"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#ac72c0d4e430673977e55113e0f7d3287">mac_entry::type</a></div><div class="ttdeci">char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00042">macCore.c:42</a></div></div>
<div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structmac__entry_html"><div class="ttname"><a href="../../d8/d15/structmac__entry.html">mac_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00039">macCore.c:39</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="classentry_html"><div class="ttname"><a href="../../d8/df9/classentry.html">entry</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
<div class="ttc" id="dbDefs_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../da/d00/dbDefs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d00/dbDefs_8h_source.html#l00027">dbDefs.h:27</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_ae5e816d5f942715d20ff18b1fb8bc87d"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">MAC_HANDLE::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">scoping level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00045">macLib.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a241872a0a52bfeacfbaeb8efb1c3c1d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macPutValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the value of a specific macro. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the length of the value string. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If <code>value</code> is NULL, all instances of <code>name</code> are undefined at all scoping levels (the named macro doesn't have to exist in this case). Macros referenced in <code>value</code> need not be defined at this point. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
    <tr><td class="paramname">name</td><td>macro name </td></tr>
    <tr><td class="paramname">value</td><td>macro value </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00233">233</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="../../d8/d15/structmac__entry.html">MAC_ENTRY</a>   *<a class="code" href="../../d8/df9/classentry.html">entry</a>;         <span class="comment">/* pointer to this macro&#39;s entry structure */</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">/* check handle */</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> ( handle == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> != <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a> ) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macPutValue: NULL or invalid handle\n&quot;</span> );</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> ( handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">debug</a> &amp; 1 )</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( <span class="stringliteral">&quot;macPutValue( %s, %s )\n&quot;</span>, name, <a class="code" href="../../dc/d07/unionvalue.html">value</a> ? <a class="code" href="../../dc/d07/unionvalue.html">value</a> : <span class="stringliteral">&quot;NULL&quot;</span> );</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">/* handle NULL value case: if name was found, delete entry (may be</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">       several entries at different scoping levels) */</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../dc/d07/unionvalue.html">value</a> == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">         * FIXME: shouldn&#39;t be able to delete entries from lower scopes</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">         * NOTE: when this is changed, this functionality of removing</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">         * a macro from all scopes will still be needed by iocshEnvClear</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">while</span> ( ( entry = lookup( handle, name, <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> ) ) != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="../../d4/de5/antelope_8c.html#aef63a5570c7d4ca2b11b69562e5f9b8f">done</a> = strcmp(entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#ac72c0d4e430673977e55113e0f7d3287">type</a>, <span class="stringliteral">&quot;environment variable&quot;</span>) == 0;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keyword">delete</span>( handle, entry );</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">if</span> (done)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">/* look up macro name */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    entry = lookup( handle, name, <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">/* new entry must be created if macro doesn&#39;t exist or if it only</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">       exists at a lower scoping level */</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> ( entry == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#ae0911464db0f2b5002f7e061cf05ff9f">level</a> &lt; handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">level</a> ) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        entry = create( handle, name, <a class="code" href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> ( entry == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macPutValue: failed to create macro %s = %s\n&quot;</span>,</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                            name, <a class="code" href="../../dc/d07/unionvalue.html">value</a> );</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#ac72c0d4e430673977e55113e0f7d3287">type</a> = <span class="stringliteral">&quot;macro&quot;</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">/* copy raw value */</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> ( rawval( handle, entry, <a class="code" href="../../dc/d07/unionvalue.html">value</a> ) == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macPutValue: failed to copy macro %s = %s\n&quot;</span>,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                        name, <a class="code" href="../../dc/d07/unionvalue.html">value</a> ) ;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">/* return length of value */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">return</span> strlen( <a class="code" href="../../dc/d07/unionvalue.html">value</a> );</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="unionvalue_html"><div class="ttname"><a href="../../dc/d07/unionvalue.html">value</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3c/link_8h_source.html#l00174">link.h:174</a></div></div>
<div class="ttc" id="dbDefs_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../da/d00/dbDefs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d00/dbDefs_8h_source.html#l00032">dbDefs.h:32</a></div></div>
<div class="ttc" id="structmac__entry_html_ac72c0d4e430673977e55113e0f7d3287"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#ac72c0d4e430673977e55113e0f7d3287">mac_entry::type</a></div><div class="ttdeci">char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00042">macCore.c:42</a></div></div>
<div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structmac__entry_html_ae0911464db0f2b5002f7e061cf05ff9f"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#ae0911464db0f2b5002f7e061cf05ff9f">mac_entry::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00049">macCore.c:49</a></div></div>
<div class="ttc" id="structmac__entry_html"><div class="ttname"><a href="../../d8/d15/structmac__entry.html">mac_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00039">macCore.c:39</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="classentry_html"><div class="ttname"><a href="../../d8/df9/classentry.html">entry</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a59d9451fa36eb872b9e959303609310f"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a59d9451fa36eb872b9e959303609310f">MAC_HANDLE::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debugging level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00046">macLib.h:46</a></div></div>
<div class="ttc" id="antelope_8c_html_aef63a5570c7d4ca2b11b69562e5f9b8f"><div class="ttname"><a href="../../d4/de5/antelope_8c.html#aef63a5570c7d4ca2b11b69562e5f9b8f">done</a></div><div class="ttdeci">void done(int k)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de5/antelope_8c_source.html#l00077">antelope.c:77</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_ae5e816d5f942715d20ff18b1fb8bc87d"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#ae5e816d5f942715d20ff18b1fb8bc87d">MAC_HANDLE::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">scoping level </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00045">macLib.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c6a3d0fd4945d5d1612b550ca27251d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API long epicsStdCall macReportMacros </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reports details of current definitions. </p>
<dl class="section return"><dt>Returns</dt><dd>0 = OK; &lt;0 = ERROR This sends details of current definitions to standard output, and is intended purely for debugging purposes. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00471">471</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *format = <span class="stringliteral">&quot;%-1s %-16s %-16s %s\n&quot;</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="../../d8/d15/structmac__entry.html">MAC_ENTRY</a> *<a class="code" href="../../d8/df9/classentry.html">entry</a>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">/* check handle */</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> ( handle == <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> != <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a> ) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macReportMacros: NULL or invalid handle\n&quot;</span> );</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">/* expand raw values if necessary; report but ignore failure */</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> ( expand( handle ) &lt; 0 )</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a>( <span class="stringliteral">&quot;macGetValue: failed to expand raw values\n&quot;</span> );</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">/* loop through macros, reporting names and values */</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( format, <span class="stringliteral">&quot;e&quot;</span>, <span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;rawval&quot;</span>, <span class="stringliteral">&quot;value&quot;</span> );</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( format, <span class="stringliteral">&quot;-&quot;</span>, <span class="stringliteral">&quot;----&quot;</span>, <span class="stringliteral">&quot;------&quot;</span>, <span class="stringliteral">&quot;-----&quot;</span> );</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">for</span> ( entry = first( handle ); entry != <a class="code" href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; entry = next( entry ) ) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">/* differentiate between &quot;special&quot; (scope marker) and ordinary</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">           entries */</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">if</span> ( entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#add383ac205917f798cd4cac8fe4fe75f">special</a> )</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( format, <span class="stringliteral">&quot;s&quot;</span>, <span class="stringliteral">&quot;----&quot;</span>, <span class="stringliteral">&quot;------&quot;</span>, <span class="stringliteral">&quot;-----&quot;</span> );</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <a class="code" href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>( format, entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#a27b2a72700279f192114f204e07f20ee">error</a> ? <span class="stringliteral">&quot;*&quot;</span> : <span class="stringliteral">&quot; &quot;</span>, entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#a5b58166dd113ac9602a463ada81abae2">name</a>,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                         entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#aec71842d81e4d47c0a247a2d3d0c6050">rawval</a> ? entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#aec71842d81e4d47c0a247a2d3d0c6050">rawval</a> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                         entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#aab28ad9988e47e816d3a1b5e8770cafd">value</a>  ? entry-&gt;<a class="code" href="../../d8/d15/structmac__entry.html#aab28ad9988e47e816d3a1b5e8770cafd">value</a>  : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="epicsStdio_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="../../d5/d2c/epicsStdio_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2c/epicsStdio_8h_source.html#l00041">epicsStdio.h:41</a></div></div>
<div class="ttc" id="structmac__entry_html_aab28ad9988e47e816d3a1b5e8770cafd"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#aab28ad9988e47e816d3a1b5e8770cafd">mac_entry::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00044">macCore.c:44</a></div></div>
<div class="ttc" id="catime_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d5/dbc/catime_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/catime_8c_source.html#l00038">catime.c:38</a></div></div>
<div class="ttc" id="structmac__entry_html_a5b58166dd113ac9602a463ada81abae2"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#a5b58166dd113ac9602a463ada81abae2">mac_entry::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00041">macCore.c:41</a></div></div>
<div class="ttc" id="structmac__entry_html_add383ac205917f798cd4cac8fe4fe75f"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#add383ac205917f798cd4cac8fe4fe75f">mac_entry::special</a></div><div class="ttdeci">int special</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00048">macCore.c:48</a></div></div>
<div class="ttc" id="structmac__entry_html"><div class="ttname"><a href="../../d8/d15/structmac__entry.html">mac_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00039">macCore.c:39</a></div></div>
<div class="ttc" id="errlog_8c_html_a92e2c31c5207ce8c46014de0e4c22ac6"><div class="ttname"><a href="../../d5/df8/errlog_8c.html#a92e2c31c5207ce8c46014de0e4c22ac6">errlogPrintf</a></div><div class="ttdeci">int errlogPrintf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df8/errlog_8c_source.html#l00105">errlog.c:105</a></div></div>
<div class="ttc" id="structmac__entry_html_a27b2a72700279f192114f204e07f20ee"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#a27b2a72700279f192114f204e07f20ee">mac_entry::error</a></div><div class="ttdeci">int error</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00046">macCore.c:46</a></div></div>
<div class="ttc" id="classentry_html"><div class="ttname"><a href="../../d8/df9/classentry.html">entry</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
<div class="ttc" id="structmac__entry_html_aec71842d81e4d47c0a247a2d3d0c6050"><div class="ttname"><a href="../../d8/d15/structmac__entry.html#aec71842d81e4d47c0a247a2d3d0c6050">mac_entry::rawval</a></div><div class="ttdeci">char * rawval</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00043">macCore.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac932a21a9721ab642c9d82e526c7b490"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBCOM_API void epicsStdCall macSuppressWarning </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d76/structMAC__HANDLE.html">MAC_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>falseTrue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable or enable warning messages. </p>
<p>The <a class="el" href="../../d8/dd1/macLib_8h.html#ac6948be35bde61becb9ca2e9a598ef7c" title="Expand a string which may contain macro references. ">macExpandString()</a> routine prints warnings when it cant expand a macro. This routine can be used to silence those warnings. A non zero value will suppress the warning messages from subsequent library routines given the same <code>handle</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>opaque handle </td></tr>
    <tr><td class="paramname">falseTrue</td><td>0 means issue, 1 means suppress </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d79/macCore_8c_source.html#l00154">154</a> of file <a class="el" href="../../d4/d79/macCore_8c_source.html">macCore.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> ( handle &amp;&amp; handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">magic</a> == <a class="code" href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a> ) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a1ac1558950ee05e9fde9318e3650b769">flags</a> = (handle-&gt;<a class="code" href="../../d5/d76/structMAC__HANDLE.html#a1ac1558950ee05e9fde9318e3650b769">flags</a> &amp; ~<a class="code" href="../../d4/d79/macCore_8c.html#a841c987f372b28ddc6b316690d638b1a">FLAG_SUPPRESS_WARNINGS</a>) |</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                        (suppress ? <a class="code" href="../../d4/d79/macCore_8c.html#a841c987f372b28ddc6b316690d638b1a">FLAG_SUPPRESS_WARNINGS</a> : 0);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="ttc" id="structMAC__HANDLE_html_a396aad301176360d5e5466a7e3bb39c2"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a396aad301176360d5e5466a7e3bb39c2">MAC_HANDLE::magic</a></div><div class="ttdeci">long magic</div><div class="ttdoc">magic number (used for authentication) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00043">macLib.h:43</a></div></div>
<div class="ttc" id="macCore_8c_html_a841c987f372b28ddc6b316690d638b1a"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#a841c987f372b28ddc6b316690d638b1a">FLAG_SUPPRESS_WARNINGS</a></div><div class="ttdeci">#define FLAG_SUPPRESS_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00088">macCore.c:88</a></div></div>
<div class="ttc" id="structMAC__HANDLE_html_a1ac1558950ee05e9fde9318e3650b769"><div class="ttname"><a href="../../d5/d76/structMAC__HANDLE.html#a1ac1558950ee05e9fde9318e3650b769">MAC_HANDLE::flags</a></div><div class="ttdeci">int flags</div><div class="ttdoc">operating mode flags </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/macLib_8h_source.html#l00048">macLib.h:48</a></div></div>
<div class="ttc" id="macCore_8c_html_aa3ceef93b787a9e6cd6d79869009cba4"><div class="ttname"><a href="../../d4/d79/macCore_8c.html#aa3ceef93b787a9e6cd6d79869009cba4">MAC_MAGIC</a></div><div class="ttdeci">#define MAC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/macCore_8c_source.html#l00083">macCore.c:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_e05d7e2b1ecd646af5bb94391405f3b5.html">modules</a></li><li class="navelem"><a class="el" href="../../dir_66ad26243ee5b9e4435a8c38b71879e0.html">libcom</a></li><li class="navelem"><a class="el" href="../../dir_3c26cc65c6aeedab9756b68f4c64367b.html">src</a></li><li class="navelem"><a class="el" href="../../dir_e11557a2f37518259e68c1833a4a2a70.html">macLib</a></li><li class="navelem"><a class="el" href="../../d8/dd1/macLib_8h.html">macLib.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
