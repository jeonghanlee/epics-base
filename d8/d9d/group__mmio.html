<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>This is Unofficial EPICS BASE Doxygen Site: Memory Mapped I/O</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../epics.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">This is Unofficial EPICS BASE Doxygen Site
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d8/d9d/group__mmio.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle">
<div class="title">Memory Mapped I/O</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:d3/d4c/epicsMMIODef_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d4c/epicsMMIODef_8h.html">epicsMMIODef.h</a></td></tr>
<tr class="memdesc:d3/d4c/epicsMMIODef_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory Mapped I/O. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabbb2bfa242f7b667710cd2adb6d8ffad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d9d/group__mmio.html#gabbb2bfa242f7b667710cd2adb6d8ffad">rbarr</a>()&#160;&#160;&#160;do{}<a class="el" href="../../d0/d3e/scan_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a>(0)</td></tr>
<tr class="memdesc:gabbb2bfa242f7b667710cd2adb6d8ffad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Explicit read memory barrier Prevents reordering of reads around it.  <a href="#gabbb2bfa242f7b667710cd2adb6d8ffad">More...</a><br /></td></tr>
<tr class="separator:gabbb2bfa242f7b667710cd2adb6d8ffad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18dc5c35a3413bd02ca26bc181a45141"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d9d/group__mmio.html#ga18dc5c35a3413bd02ca26bc181a45141">wbarr</a>()&#160;&#160;&#160;do{}<a class="el" href="../../d0/d3e/scan_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a>(0)</td></tr>
<tr class="memdesc:ga18dc5c35a3413bd02ca26bc181a45141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Explicit write memory barrier Prevents reordering of writes around it.  <a href="#ga18dc5c35a3413bd02ca26bc181a45141">More...</a><br /></td></tr>
<tr class="separator:ga18dc5c35a3413bd02ca26bc181a45141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed3ff8d20a3a9671dc75919dcc08a21f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d9d/group__mmio.html#gaed3ff8d20a3a9671dc75919dcc08a21f">rwbarr</a>()&#160;&#160;&#160;do{}<a class="el" href="../../d0/d3e/scan_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a>(0)</td></tr>
<tr class="memdesc:gaed3ff8d20a3a9671dc75919dcc08a21f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Explicit read/write memory barrier Prevents reordering of reads or writes around it.  <a href="#gaed3ff8d20a3a9671dc75919dcc08a21f">More...</a><br /></td></tr>
<tr class="separator:gaed3ff8d20a3a9671dc75919dcc08a21f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Safe operations on I/O memory.</p>
<p>This files defines a set of macros for access to Memory Mapped I/O</p>
<p>They are named T_ioread# and T_iowrite# where # can be 8, 16, or 32. 'T' can either be 'le', 'be', or 'nat' (except ioread8 and iowrite8).</p>
<p>The macros defined use OS specific extensions (when available) to ensure the following.</p>
<ul>
<li>Width. A 16 bit operation will not be broken into two 8 bit operations, or one half of a 32 bit operation.</li>
</ul>
<ul>
<li>Order. Writes to two different registers will not be reordered. This only applies to MMIO operations, not between MMIO and normal memory operations.</li>
</ul>
<p>PCI access should use either 'le_' or 'be_' as determined by the device byte order.</p>
<p>VME access should always use 'nat_'. If the device byte order is little endian then an explicit swap is required.</p>
<h1><a class="anchor" id="mmioex"></a>
Examples:</h1>
<h2><a class="anchor" id="mmioexbe"></a>
Big endian device:</h2>
<p><b>PCI</b> </p>
<div class="fragment"><div class="line"><a class="code" href="../../d3/d4c/epicsMMIODef_8h.html#a53fa7c1334c3dd55c18ff39d539c7967">be_iowrite16</a>(<a class="code" href="../../d6/ded/flex_8c.html#a4015213f1363674b898680b20e217b4e">base</a>+off, 14);</div><div class="line">var = <a class="code" href="../../d3/d4c/epicsMMIODef_8h.html#a0d46f3f1cfa66ab45435648f183b1701">be_ioread16</a>(<a class="code" href="../../d6/ded/flex_8c.html#a4015213f1363674b898680b20e217b4e">base</a>+off);</div></div><!-- fragment --><p><b>VME</b> </p>
<div class="fragment"><div class="line"><a class="code" href="../../db/d61/vxWorks_2epicsMMIO_8h.html#a7f72618080c0b171d5bbd36b6bdf1123">nat_iowrite16</a>(<a class="code" href="../../d6/ded/flex_8c.html#a4015213f1363674b898680b20e217b4e">base</a>+off, 14);</div><div class="line">var = <a class="code" href="../../db/d61/vxWorks_2epicsMMIO_8h.html#a8e0ec18e6a54a26f793dda2307cc1677">nat_ioread16</a>(<a class="code" href="../../d6/ded/flex_8c.html#a4015213f1363674b898680b20e217b4e">base</a>+off);</div></div><!-- fragment --><h2><a class="anchor" id="mmioexle"></a>
Little endian device</h2>
<p><b>PCI</b> </p><div class="fragment"><div class="line"><a class="code" href="../../d3/d4c/epicsMMIODef_8h.html#ac52c3a503c557e71b049d344c3f7d97b">le_iowrite16</a>(<a class="code" href="../../d6/ded/flex_8c.html#a4015213f1363674b898680b20e217b4e">base</a>+off, 14);</div><div class="line">var = <a class="code" href="../../d3/d4c/epicsMMIODef_8h.html#a3071e41ab96b7735ed63540c5c016765">le_ioread16</a>(<a class="code" href="../../d6/ded/flex_8c.html#a4015213f1363674b898680b20e217b4e">base</a>+off);</div></div><!-- fragment --><p> <b>VME</b> </p><div class="fragment"><div class="line"><a class="code" href="../../db/d61/vxWorks_2epicsMMIO_8h.html#a7f72618080c0b171d5bbd36b6bdf1123">nat_iowrite16</a>(<a class="code" href="../../d6/ded/flex_8c.html#a4015213f1363674b898680b20e217b4e">base</a>+off, bswap16(14));</div><div class="line">var = bswap16(<a class="code" href="../../db/d61/vxWorks_2epicsMMIO_8h.html#a7f72618080c0b171d5bbd36b6bdf1123">nat_iowrite16</a>(<a class="code" href="../../d6/ded/flex_8c.html#a4015213f1363674b898680b20e217b4e">base</a>+off));</div></div><!-- fragment --><p> This difference arises because VME bridges implement hardware byte swapping on little endian systems, while PCI bridges do not. Software accessing PCI devices must know if byte swapping is required. This conditional swap is implemented by the 'be_' and 'le_' macros.</p>
<p>This is a fundamental difference between PCI and VME.</p>
<p>Software accessing PCI <b>must</b> do conditional swapping.</p>
<p>Software accessing VME must <b>not</b> do conditional swapping.</p>
<dl class="section note"><dt>Note</dt><dd>All read and write operations have an implicit read or write barrier. </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gabbb2bfa242f7b667710cd2adb6d8ffad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rbarr</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;do{}<a class="el" href="../../d0/d3e/scan_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a>(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Explicit read memory barrier Prevents reordering of reads around it. </p>

<p>Definition at line <a class="el" href="../../d3/d4c/epicsMMIODef_8h_source.html#l00198">198</a> of file <a class="el" href="../../d3/d4c/epicsMMIODef_8h_source.html">epicsMMIODef.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaed3ff8d20a3a9671dc75919dcc08a21f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rwbarr</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;do{}<a class="el" href="../../d0/d3e/scan_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a>(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Explicit read/write memory barrier Prevents reordering of reads or writes around it. </p>

<p>Definition at line <a class="el" href="../../d3/d4c/epicsMMIODef_8h_source.html#l00206">206</a> of file <a class="el" href="../../d3/d4c/epicsMMIODef_8h_source.html">epicsMMIODef.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga18dc5c35a3413bd02ca26bc181a45141"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define wbarr</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;do{}<a class="el" href="../../d0/d3e/scan_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a>(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Explicit write memory barrier Prevents reordering of writes around it. </p>

<p>Definition at line <a class="el" href="../../d3/d4c/epicsMMIODef_8h_source.html#l00202">202</a> of file <a class="el" href="../../d3/d4c/epicsMMIODef_8h_source.html">epicsMMIODef.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
